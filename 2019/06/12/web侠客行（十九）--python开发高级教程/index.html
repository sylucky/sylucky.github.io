
<!doctype html>
<html class="theme-next use-motion theme-next-mala">
<head><meta name="generator" content="Hexo 3.8.0">
  

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">


  <meta name="google-site-verification" content="xxx">





  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5">




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1">


    <meta name="description" content="剑神一笑天地变，不爱江山爱美人">



  <meta name="keywords" content="开发,PYTHON,公众号,">



  <link rel="alternate" href="/atom.xml" title="剑神一笑的博客" type="application/atom+xml">



  <link rel="shorticon icon" type="image/x-icon" href="/lele.ico?v=0.4.5.1">


<meta name="description" content="Python 模块Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。 模块让你能够有逻辑地组织你的 Python 代码段。 把相关的代码分配到一个模块里能让你的代码更好用，更易懂。 模块能定义函数，类和变量，模块里也能包含可执行的代码。 例子 下例是个简单的模块 support.py： support.py 模块：1">
<meta name="keywords" content="开发,PYTHON,公众号">
<meta property="og:type" content="article">
<meta property="og:title" content="web侠客行（十九）--python开发高级教程">
<meta property="og:url" content="http://sylucky.github.io/2019/06/12/web侠客行（十九）--python开发高级教程/index.html">
<meta property="og:site_name" content="剑神一笑的博客">
<meta property="og:description" content="Python 模块Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。 模块让你能够有逻辑地组织你的 Python 代码段。 把相关的代码分配到一个模块里能让你的代码更好用，更易懂。 模块能定义函数，类和变量，模块里也能包含可执行的代码。 例子 下例是个简单的模块 support.py： support.py 模块：1">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-06-12T16:26:33.413Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="web侠客行（十九）--python开发高级教程">
<meta name="twitter:description" content="Python 模块Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。 模块让你能够有逻辑地组织你的 Python 代码段。 把相关的代码分配到一个模块里能让你的代码更好用，更易懂。 模块能定义函数，类和变量，模块里也能包含可执行的代码。 例子 下例是个简单的模块 support.py： support.py 模块：1">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mala',
    sidebar: 'post'
  };
</script>

  <title> web侠客行（十九）--python开发高级教程 | 剑神一笑的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'xxx', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?xxx";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">剑神一笑</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br>
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br>
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br>
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br>
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br>
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input">
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'xxx','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    
      

      
        <style type="text/css">

    .circle {
        width: 40px;
        height: 40px;
        background: #555 no-repeat;
        cursor: move;
    }

    .assist-btn {
        position: fixed;
        top: 50％;
        left: 10px;
        -moz-border-radius: 50px;
        -webkit-border-radius: 50px;
        border-radius: 50px;
        outline: none;
        border: none;
        color: #87daff;
    }

</style>

<script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript">
    // 浮动圆点展开与收缩
    /*
    $(function () {
        var assist_box = $('.assist-box');
        $('#assist_btn').hover(function () {
            assist_box.stop().show(300);
        }, function () {
            assist_box.stop().hide(150);
        })
    });
    */  
    //浮动圆点拖动
    $(function () {
        var box = document.getElementById('assist_btn');
        box.onmousedown = function (event) {
            var e = event || window.event,
                t = e.target || e.srcElement,
                // 鼠标按下时的坐标x1,y1
                x1 = e.clientX,
                y1 = e.clientY,
                //鼠标按下时的左右偏移量
                dragLeft = this.offsetLeft,
                dragTop = this.offsetTop;

            document.onmousemove = function (event) {
                var e = event || window.event,
                    t = e.target || e.srcElement,
                    // 鼠标移动时的动态坐标
                    x2 = e.clientX,
                    y2 = e.clientY,
                    // 鼠标移动时的坐标的变化量
                    x = x2 - x1,
                    y = y2 - y1;
                box.style.left = (dragLeft + x) + 'px';
                box.style.top = (dragTop + y) + 'px';
            }

            document.onmouseup = function () {
                this.onmousemove = null;
            }
        }
    });

/*
    $whitesmoke   = #f5f5f5
    $gainsboro    = #eee
    $gray-lighter = #ddd
    $grey-light   = #ccc
    $grey         = #bbb
    $grey-dark    = #999
    $grey-dim     = #666
    $black-light  = #555
    $black-deep   = #222
    $red          = #ff2a2a
    $blue-bright  = #87daff
    $blue         = #0684bd
    $blue-deep    = #262a30
*/
    // white theme
    var body = {color: "#555", background: "white"};
    var a_tag = {color: "#222"};
    var header = { background: "#f5f5f5"};
    var logo_line_i = {background: "#222"};
    // var post_code = {background: "#eee", color: "#222"};

    function switch_theme() {
        $("body").css(body);
        $("a:not('.links-of-author-item a, .site-state-item a, .site-state-posts a, .feed-link a, .motion-element a, .post-tags a, .show-commit-cls a, #donate_board a')").css(a_tag);
        $(".header, .footer").css(header);
        $(".logo-line-before i, .logo-line-after i").css(logo_line_i);
        //$(".post code").css(post_code);
        $("#idhyt-surprise-ball #idhyt-surprise-ball-animation .drag").css(a_tag);
        $(".post-title-link, .posts-expand .post-meta, .post-comments-count, .disqus-comment-count, .post-category a, .post-nav-next a, .post-nav-item a").css(a_tag);
        
        // $("code").css({color: '#c5c8c6', background: '#1d1f21'});
        $("#assist_btn").hide(1500);
    }

    $(function () {
        $("#assist_btn").dblclick(function() {
            switch_theme();
        });
    });

</script>

<div>

    <button class="assist-btn circle" id="assist_btn" title="双击切换">
        亮
    </button>

</div>









      

    

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              web侠客行（十九）--python开发高级教程
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2019-06-12T19:02:12+08:00" content="2019-06-12">
            2019-06-12
          </time>
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/教程/" itemprop="url" rel="index">
                  <span itemprop="name">教程</span>
                </a>
              </span>

              
              
                ， 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/教程/web/" itemprop="url" rel="index">
                  <span itemprop="name">web</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h1 id="Python-模块"><a href="#Python-模块" class="headerlink" title="Python 模块"></a>Python 模块</h1><p>Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。</p>
<p>模块让你能够有逻辑地组织你的 Python 代码段。</p>
<p>把相关的代码分配到一个模块里能让你的代码更好用，更易懂。</p>
<p>模块能定义函数，类和变量，模块里也能包含可执行的代码。</p>
<p>例子</p>
<p>下例是个简单的模块 support.py：</p>
<p>support.py 模块：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def print_func( par ):</span><br><span class="line">   print &quot;Hello : &quot;, par</span><br><span class="line">   return</span><br></pre></td></tr></table></figure></p>
<h2 id="模块的引入"><a href="#模块的引入" class="headerlink" title="模块的引入"></a>模块的引入</h2><p>模块定义好后，我们可以使用 import 语句来引入模块</p>
<p>当解释器遇到 import 语句，如果模块在当前的搜索路径就会被导入。</p>
<p>搜索路径是一个解释器会先进行搜索的所有目录的列表。如想要导入模块 support.py，需要把命令放在脚本的顶端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 导入模块</span><br><span class="line">import support</span><br><span class="line"> </span><br><span class="line"># 现在可以调用模块里包含的函数了</span><br><span class="line">support.print_func(&quot;Runoob&quot;)</span><br></pre></td></tr></table></figure></p>
<h2 id="from…import-语句"><a href="#from…import-语句" class="headerlink" title="from…import 语句"></a>from…import 语句</h2><p>Python 的 from 语句让你从模块中导入一个指定的部分到当前命名空间中。语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from fib import fibonacci</span><br></pre></td></tr></table></figure>
<p>这个声明不会把整个 fib 模块导入到当前的命名空间中，它只会将 fib 里的 fibonacci 单个引入到执行这个声明的模块的全局符号表。</p>
<h2 id="from…import-语句-1"><a href="#from…import-语句-1" class="headerlink" title="from…import* 语句"></a>from…import* 语句</h2><p>把一个模块的所有内容全都导入到当前的命名空间也是可行的，只需使用如下声明：</p>
<p>例如我们想一次性引入 math 模块中所有的东西，语句如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from math import *</span><br></pre></td></tr></table></figure></p>
<h2 id="PYTHONPATH-变量"><a href="#PYTHONPATH-变量" class="headerlink" title="PYTHONPATH 变量"></a>PYTHONPATH 变量</h2><p>作为环境变量，PYTHONPATH 由装在一个列表里的许多目录组成。PYTHONPATH 的语法和 shell 变量 PATH 的一样。</p>
<p>在 Windows 系统，典型的 PYTHONPATH 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set PYTHONPATH=c:\python27\lib;</span><br></pre></td></tr></table></figure></p>
<p>在 UNIX 系统，典型的 PYTHONPATH 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set PYTHONPATH=/usr/local/lib/python</span><br></pre></td></tr></table></figure></p>
<h2 id="dir-函数"><a href="#dir-函数" class="headerlink" title="dir()函数"></a>dir()函数</h2><p>dir() 函数一个排好序的字符串列表，内容是一个模块里定义过的名字。</p>
<p>返回的列表容纳了在一个模块里定义的所有模块，变量和函数。如下一个简单的实例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 导入内置math模块</span><br><span class="line">import math</span><br><span class="line"> </span><br><span class="line">content = dir(math)</span><br><span class="line"> </span><br><span class="line">print content;</span><br></pre></td></tr></table></figure></p>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[&apos;__doc__&apos;, &apos;__file__&apos;, &apos;__name__&apos;, &apos;acos&apos;, &apos;asin&apos;, &apos;atan&apos;, </span><br><span class="line">&apos;atan2&apos;, &apos;ceil&apos;, &apos;cos&apos;, &apos;cosh&apos;, &apos;degrees&apos;, &apos;e&apos;, &apos;exp&apos;, </span><br><span class="line">&apos;fabs&apos;, &apos;floor&apos;, &apos;fmod&apos;, &apos;frexp&apos;, &apos;hypot&apos;, &apos;ldexp&apos;, &apos;log&apos;,</span><br><span class="line">&apos;log10&apos;, &apos;modf&apos;, &apos;pi&apos;, &apos;pow&apos;, &apos;radians&apos;, &apos;sin&apos;, &apos;sinh&apos;, </span><br><span class="line">&apos;sqrt&apos;, &apos;tan&apos;, &apos;tanh&apos;]</span><br></pre></td></tr></table></figure></p>
<h2 id="globals-和-locals-函数"><a href="#globals-和-locals-函数" class="headerlink" title="globals() 和 locals() 函数"></a>globals() 和 locals() 函数</h2><p>根据调用地方的不同，globals() 和 locals() 函数可被用来返回全局和局部命名空间里的名字。</p>
<p>如果在函数内部调用 locals()，返回的是所有能在该函数里访问的命名。</p>
<p>如果在函数内部调用 globals()，返回的是所有在该函数里能访问的全局名字。</p>
<p>两个函数的返回类型都是字典。所以名字们能用 keys() 函数摘取。</p>
<h2 id="reload-函数"><a href="#reload-函数" class="headerlink" title="reload() 函数"></a>reload() 函数</h2><p>当一个模块被导入到一个脚本，模块顶层部分的代码只会被执行一次。</p>
<p>因此，如果你想重新执行模块里顶层部分的代码，可以用 reload() 函数。该函数会重新导入之前导入过的模块。<br>在这里，module_name要直接放模块的名字，而不是一个字符串形式。比如想重载 hello 模块，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reload(hello)</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-文件I-O"><a href="#Python-文件I-O" class="headerlink" title="Python 文件I/O"></a>Python 文件I/O</h1><h2 id="打印到屏幕"><a href="#打印到屏幕" class="headerlink" title="打印到屏幕"></a>打印到屏幕</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*- </span><br><span class="line"></span><br><span class="line">print &quot;Python 是一个非常棒的语言，不是吗？&quot;</span><br></pre></td></tr></table></figure>
<h2 id="读取键盘输入"><a href="#读取键盘输入" class="headerlink" title="读取键盘输入"></a>读取键盘输入</h2><h3 id="raw-input函数"><a href="#raw-input函数" class="headerlink" title="raw_input函数"></a>raw_input函数</h3><p>raw_input([prompt]) 函数从标准输入读取一个行，并返回一个字符串（去掉结尾的换行符）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*- </span><br><span class="line"> </span><br><span class="line">str = raw_input(&quot;请输入：&quot;)</span><br><span class="line">print &quot;你输入的内容是: &quot;, str</span><br></pre></td></tr></table></figure></p>
<h3 id="input函数"><a href="#input函数" class="headerlink" title="input函数"></a>input函数</h3><p>input([prompt]) 函数和 raw_input([prompt]) 函数基本类似，但是 input 可以接收一个Python表达式作为输入，并将运算结果返回。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*- </span><br><span class="line"> </span><br><span class="line">str = input(&quot;请输入：&quot;)</span><br><span class="line">print &quot;你输入的内容是: &quot;, str</span><br></pre></td></tr></table></figure></p>
<h2 id="File对象"><a href="#File对象" class="headerlink" title="File对象"></a>File对象</h2><p>一个文件被打开后，你有一个file对象，你可以得到有关该文件的各种信息。</p>
<p>以下是和file对象相关的所有属性的列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">属性	描述</span><br><span class="line">file.closed	返回true如果文件已被关闭，否则返回false。</span><br><span class="line">file.mode	返回被打开文件的访问模式。</span><br><span class="line">file.name	返回文件的名称。</span><br><span class="line">file.softspace	如果用print输出后，必须跟一个空格符，则返回false。否则返回true。</span><br></pre></td></tr></table></figure></p>
<h3 id="open-函数"><a href="#open-函数" class="headerlink" title="open 函数"></a>open 函数</h3><p>你必须先用Python内置的open()函数打开一个文件，创建一个file对象，相关的方法才可以调用它进行读写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 打开一个文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;w&quot;)</span><br><span class="line">print &quot;文件名: &quot;, fo.name</span><br><span class="line">print &quot;是否已关闭 : &quot;, fo.closed</span><br><span class="line">print &quot;访问模式 : &quot;, fo.mode</span><br><span class="line">print &quot;末尾是否强制加空格 : &quot;, fo.softspace</span><br></pre></td></tr></table></figure></p>
<h3 id="close-方法"><a href="#close-方法" class="headerlink" title="close()方法"></a>close()方法</h3><p>File 对象的 close（）方法刷新缓冲区里任何还没写入的信息，并关闭该文件，这之后便不能再进行写入。</p>
<p>当一个文件对象的引用被重新指定给另一个文件时，Python 会关闭之前的文件。用 close（）方法关闭文件是一个很好的习惯。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 打开一个文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;w&quot;)</span><br><span class="line">print &quot;文件名: &quot;, fo.name</span><br><span class="line"> </span><br><span class="line"># 关闭打开的文件</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="write-方法"><a href="#write-方法" class="headerlink" title="write()方法"></a>write()方法</h3><p>write()方法可将任何字符串写入一个打开的文件。需要重点注意的是，Python字符串可以是二进制数据，而不是仅仅是文字。</p>
<p>write()方法不会在字符串的结尾添加换行符(‘\n’)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 打开一个文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;w&quot;)</span><br><span class="line">fo.write( &quot;www.runoob.com!\nVery good site!\n&quot;)</span><br><span class="line"> </span><br><span class="line"># 关闭打开的文件</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="read-方法"><a href="#read-方法" class="headerlink" title="read()方法"></a>read()方法</h3><p>read（）方法从一个打开的文件中读取一个字符串。需要重点注意的是，Python字符串可以是二进制数据，而不是仅仅是文字。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 打开一个文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;r+&quot;)</span><br><span class="line">str = fo.read(10)</span><br><span class="line">print &quot;读取的字符串是 : &quot;, str</span><br><span class="line"># 关闭打开的文件</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure></p>
<h2 id="文件定位"><a href="#文件定位" class="headerlink" title="文件定位"></a>文件定位</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line"># 打开一个文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;r+&quot;)</span><br><span class="line">str = fo.read(10)</span><br><span class="line">print &quot;读取的字符串是 : &quot;, str</span><br><span class="line"> </span><br><span class="line"># 查找当前位置</span><br><span class="line">position = fo.tell()</span><br><span class="line">print &quot;当前文件位置 : &quot;, position</span><br><span class="line"> </span><br><span class="line"># 把指针再次重新定位到文件开头</span><br><span class="line">position = fo.seek(0, 0)</span><br><span class="line">str = fo.read(10)</span><br><span class="line">print &quot;重新读取字符串 : &quot;, str</span><br><span class="line"># 关闭打开的文件</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure>
<h2 id="rename-方法"><a href="#rename-方法" class="headerlink" title="rename()方法"></a>rename()方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 重命名文件test1.txt到test2.txt。</span><br><span class="line">os.rename( &quot;test1.txt&quot;, &quot;test2.txt&quot; )</span><br></pre></td></tr></table></figure>
<h2 id="remove-方法"><a href="#remove-方法" class="headerlink" title="remove()方法"></a>remove()方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 删除一个已经存在的文件test2.txt</span><br><span class="line">os.remove(&quot;test2.txt&quot;)</span><br></pre></td></tr></table></figure>
<h2 id="mkdir-方法"><a href="#mkdir-方法" class="headerlink" title="mkdir()方法"></a>mkdir()方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 创建目录test</span><br><span class="line">os.mkdir(&quot;test&quot;)</span><br></pre></td></tr></table></figure>
<h2 id="child-方法"><a href="#child-方法" class="headerlink" title="child()方法"></a>child()方法</h2><p>可以用chdir()方法来改变当前的目录。chdir()方法需要的一个参数是你想设成当前目录的目录名称。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 将当前目录改为&quot;/home/newdir&quot;</span><br><span class="line">os.chdir(&quot;/home/newdir&quot;)</span><br></pre></td></tr></table></figure></p>
<h2 id="getcwd-方法"><a href="#getcwd-方法" class="headerlink" title="getcwd()方法"></a>getcwd()方法</h2><p>getcwd()方法显示当前的工作目录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 给出当前的目录</span><br><span class="line">print os.getcwd()</span><br></pre></td></tr></table></figure></p>
<h2 id="rmdir-方法"><a href="#rmdir-方法" class="headerlink" title="rmdir()方法"></a>rmdir()方法</h2><p>rmdir()方法删除目录，目录名称以参数传递。</p>
<p>在删除这个目录之前，它的所有内容应该先被清除。</p>
<p>以下是删除” /tmp/test”目录的例子。目录的完全合规的名称必须被给出，否则会在当前目录下搜索该目录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"> </span><br><span class="line"># 删除”/tmp/test”目录</span><br><span class="line">os.rmdir( &quot;/tmp/test&quot;  )</span><br></pre></td></tr></table></figure></p>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="python标准异常"><a href="#python标准异常" class="headerlink" title="python标准异常"></a>python标准异常</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">异常名称	描述</span><br><span class="line">BaseException	所有异常的基类</span><br><span class="line">SystemExit	解释器请求退出</span><br><span class="line">KeyboardInterrupt	用户中断执行(通常是输入^C)</span><br><span class="line">Exception	常规错误的基类</span><br><span class="line">StopIteration	迭代器没有更多的值</span><br><span class="line">GeneratorExit	生成器(generator)发生异常来通知退出</span><br><span class="line">StandardError	所有的内建标准异常的基类</span><br><span class="line">ArithmeticError	所有数值计算错误的基类</span><br><span class="line">FloatingPointError	浮点计算错误</span><br><span class="line">OverflowError	数值运算超出最大限制</span><br><span class="line">ZeroDivisionError	除(或取模)零 (所有数据类型)</span><br><span class="line">AssertionError	断言语句失败</span><br><span class="line">AttributeError	对象没有这个属性</span><br><span class="line">EOFError	没有内建输入,到达EOF 标记</span><br><span class="line">EnvironmentError	操作系统错误的基类</span><br><span class="line">IOError	输入/输出操作失败</span><br><span class="line">OSError	操作系统错误</span><br><span class="line">WindowsError	系统调用失败</span><br><span class="line">ImportError	导入模块/对象失败</span><br><span class="line">LookupError	无效数据查询的基类</span><br><span class="line">IndexError	序列中没有此索引(index)</span><br><span class="line">KeyError	映射中没有这个键</span><br><span class="line">MemoryError	内存溢出错误(对于Python 解释器不是致命的)</span><br><span class="line">NameError	未声明/初始化对象 (没有属性)</span><br><span class="line">UnboundLocalError	访问未初始化的本地变量</span><br><span class="line">ReferenceError	弱引用(Weak reference)试图访问已经垃圾回收了的对象</span><br><span class="line">RuntimeError	一般的运行时错误</span><br><span class="line">NotImplementedError	尚未实现的方法</span><br><span class="line">SyntaxError	Python 语法错误</span><br><span class="line">IndentationError	缩进错误</span><br><span class="line">TabError	Tab 和空格混用</span><br><span class="line">SystemError	一般的解释器系统错误</span><br><span class="line">TypeError	对类型无效的操作</span><br><span class="line">ValueError	传入无效的参数</span><br><span class="line">UnicodeError	Unicode 相关的错误</span><br><span class="line">UnicodeDecodeError	Unicode 解码时的错误</span><br><span class="line">UnicodeEncodeError	Unicode 编码时错误</span><br><span class="line">UnicodeTranslateError	Unicode 转换时错误</span><br><span class="line">Warning	警告的基类</span><br><span class="line">DeprecationWarning	关于被弃用的特征的警告</span><br><span class="line">FutureWarning	关于构造将来语义会有改变的警告</span><br><span class="line">OverflowWarning	旧的关于自动提升为长整型(long)的警告</span><br><span class="line">PendingDeprecationWarning	关于特性将会被废弃的警告</span><br><span class="line">RuntimeWarning	可疑的运行时行为(runtime behavior)的警告</span><br><span class="line">SyntaxWarning	可疑的语法的警告</span><br><span class="line">UserWarning	用户代码生成的警告</span><br></pre></td></tr></table></figure>
<p>try…except<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    fh = open(&quot;testfile&quot;, &quot;w&quot;)</span><br><span class="line">    fh.write(&quot;这是一个测试文件，用于测试异常!!&quot;)</span><br><span class="line">except IOError:</span><br><span class="line">    print &quot;Error: 没有找到文件或读取文件失败&quot;</span><br><span class="line">else:</span><br><span class="line">    print &quot;内容写入文件成功&quot;</span><br><span class="line">    fh.close()</span><br></pre></td></tr></table></figure></p>
<p>下面是简单的例子，它打开一个文件，在该文件中的内容写入内容，但文件没有写入权限，发生了异常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    fh = open(&quot;testfile&quot;, &quot;w&quot;)</span><br><span class="line">    fh.write(&quot;这是一个测试文件，用于测试异常!!&quot;)</span><br><span class="line">except IOError:</span><br><span class="line">    print &quot;Error: 没有找到文件或读取文件失败&quot;</span><br><span class="line">else:</span><br><span class="line">    print &quot;内容写入文件成功&quot;</span><br><span class="line">    fh.close()</span><br></pre></td></tr></table></figure></p>
<h2 id="try-finally-语句"><a href="#try-finally-语句" class="headerlink" title="try-finally 语句"></a>try-finally 语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    fh = open(&quot;testfile&quot;, &quot;w&quot;)</span><br><span class="line">    fh.write(&quot;这是一个测试文件，用于测试异常!!&quot;)</span><br><span class="line">finally:</span><br><span class="line">    print &quot;Error: 没有找到文件或读取文件失败&quot;</span><br></pre></td></tr></table></figure>
<p>下面的写法更优<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    fh = open(&quot;testfile&quot;, &quot;w&quot;)</span><br><span class="line">    try:</span><br><span class="line">        fh.write(&quot;这是一个测试文件，用于测试异常!!&quot;)</span><br><span class="line">    finally:</span><br><span class="line">        print &quot;关闭文件&quot;</span><br><span class="line">        fh.close()</span><br><span class="line">except IOError:</span><br><span class="line">    print &quot;Error: 没有找到文件或读取文件失败&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="触发异常"><a href="#触发异常" class="headerlink" title="触发异常"></a>触发异常</h2><p>我们可以使用raise语句自己触发异常<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 定义函数</span><br><span class="line">def mye( level ):</span><br><span class="line">    if level &lt; 1:</span><br><span class="line">        raise Exception,&quot;Invalid level!&quot;</span><br><span class="line">        # 触发异常后，后面的代码就不会再执行</span><br><span class="line">try:</span><br><span class="line">    mye(0)            # 触发异常</span><br><span class="line">except Exception,err:</span><br><span class="line">    print 1,err</span><br><span class="line">else:</span><br><span class="line">    print 2</span><br></pre></td></tr></table></figure></p>
<h2 id="用户自定义异常"><a href="#用户自定义异常" class="headerlink" title="用户自定义异常"></a>用户自定义异常</h2><p>通过创建一个新的异常类，程序可以命名它们自己的异常。异常应该是典型的继承自Exception类，通过直接或间接的方式。</p>
<p>以下为与RuntimeError相关的实例,实例中创建了一个类，基类为RuntimeError，用于在异常触发时输出更多的信息。</p>
<p>在try语句块中，用户自定义的异常后执行except块语句，变量 e 是用于创建Networkerror类的实例。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Networkerror(RuntimeError):</span><br><span class="line">    def __init__(self, arg):</span><br><span class="line">        self.args = arg</span><br></pre></td></tr></table></figure></p>
<p>在你定义以上类后，你可以触发该异常，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    raise Networkerror(&quot;Bad hostname&quot;)</span><br><span class="line">except Networkerror,e:</span><br><span class="line">    print e.args</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-面向对象"><a href="#Python-面向对象" class="headerlink" title="Python 面向对象"></a>Python 面向对象</h1><h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class Employee:</span><br><span class="line">   &apos;所有员工的基类&apos;</span><br><span class="line">   empCount = 0</span><br><span class="line"> </span><br><span class="line">   def __init__(self, name, salary):</span><br><span class="line">      self.name = name</span><br><span class="line">      self.salary = salary</span><br><span class="line">      Employee.empCount += 1</span><br><span class="line">   </span><br><span class="line">   def displayCount(self):</span><br><span class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</span><br><span class="line"> </span><br><span class="line">   def displayEmployee(self):</span><br><span class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</span><br></pre></td></tr></table></figure>
<p>empCount 变量是一个类变量，它的值将在这个类的所有实例之间共享。你可以在内部类或外部类使用 Employee.empCount 访问。</p>
<p>第一种方法<strong>init</strong>()方法是一种特殊的方法，被称为类的构造函数或初始化方法，当创建了这个类的实例时就会调用该方法</p>
<p>self 代表类的实例，self 在定义类的方法时是必须有的，虽然在调用时不必传入相应的参数。</p>
<h2 id="创建实例对象"><a href="#创建实例对象" class="headerlink" title="创建实例对象"></a>创建实例对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class Employee:</span><br><span class="line">   &apos;所有员工的基类&apos;</span><br><span class="line">   empCount = 0</span><br><span class="line"> </span><br><span class="line">   def __init__(self, name, salary):</span><br><span class="line">      self.name = name</span><br><span class="line">      self.salary = salary</span><br><span class="line">      Employee.empCount += 1</span><br><span class="line">   </span><br><span class="line">   def displayCount(self):</span><br><span class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</span><br><span class="line"> </span><br><span class="line">   def displayEmployee(self):</span><br><span class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</span><br><span class="line"> </span><br><span class="line">&quot;创建 Employee 类的第一个对象&quot;</span><br><span class="line">emp1 = Employee(&quot;Zara&quot;, 2000)</span><br><span class="line">&quot;创建 Employee 类的第二个对象&quot;</span><br><span class="line">emp2 = Employee(&quot;Manni&quot;, 5000)</span><br><span class="line">emp1.displayEmployee()</span><br><span class="line">emp2.displayEmployee()</span><br><span class="line">print &quot;Total Employee %d&quot; % Employee.empCount</span><br></pre></td></tr></table></figure>
<p>可以添加，删除，修改类的属性，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">emp1.age = 7  # 添加一个 &apos;age&apos; 属性</span><br><span class="line">emp1.age = 8  # 修改 &apos;age&apos; 属性</span><br><span class="line">del emp1.age  # 删除 &apos;age&apos; 属性</span><br></pre></td></tr></table></figure></p>
<p>你也可以使用以下函数的方式来访问属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getattr(obj, name[, default]) : 访问对象的属性。</span><br><span class="line">hasattr(obj,name) : 检查是否存在一个属性。</span><br><span class="line">setattr(obj,name,value) : 设置一个属性。如果属性不存在，会创建一个新属性。</span><br><span class="line">delattr(obj, name) : 删除属性。</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">hasattr(emp1, &apos;age&apos;)    # 如果存在 &apos;age&apos; 属性返回 True。</span><br><span class="line">getattr(emp1, &apos;age&apos;)    # 返回 &apos;age&apos; 属性的值</span><br><span class="line">setattr(emp1, &apos;age&apos;, 8) # 添加属性 &apos;age&apos; 值为 8</span><br><span class="line">delattr(emp1, &apos;age&apos;)    # 删除属性 &apos;age&apos;</span><br></pre></td></tr></table></figure></p>
<h2 id="Python内置类属性"><a href="#Python内置类属性" class="headerlink" title="Python内置类属性"></a>Python内置类属性</h2><p><strong>dict</strong> : 类的属性（包含一个字典，由类的数据属性组成）<br><strong>doc</strong> :类的文档字符串<br><strong>name</strong>: 类名<br><strong>module</strong>: 类定义所在的模块（类的全名是’<strong>main</strong>.className’，如果类位于一个导入模块mymod中，那么className.<strong>module</strong> 等于 mymod）<br><strong>bases</strong> : 类的所有父类构成元素（包含了一个由所有父类组成的元组）<br>Python内置类属性调用实例如下：</p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class Employee:</span><br><span class="line">   &apos;所有员工的基类&apos;</span><br><span class="line">   empCount = 0</span><br><span class="line"> </span><br><span class="line">   def __init__(self, name, salary):</span><br><span class="line">      self.name = name</span><br><span class="line">      self.salary = salary</span><br><span class="line">      Employee.empCount += 1</span><br><span class="line">   </span><br><span class="line">   def displayCount(self):</span><br><span class="line">     print &quot;Total Employee %d&quot; % Employee.empCount</span><br><span class="line"> </span><br><span class="line">   def displayEmployee(self):</span><br><span class="line">      print &quot;Name : &quot;, self.name,  &quot;, Salary: &quot;, self.salary</span><br><span class="line"> </span><br><span class="line">print &quot;Employee.__doc__:&quot;, Employee.__doc__</span><br><span class="line">print &quot;Employee.__name__:&quot;, Employee.__name__</span><br><span class="line">print &quot;Employee.__module__:&quot;, Employee.__module__</span><br><span class="line">print &quot;Employee.__bases__:&quot;, Employee.__bases__</span><br><span class="line">print &quot;Employee.__dict__:&quot;, Employee.__dict__</span><br></pre></td></tr></table></figure></p>
<p>执行以上代码输出结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Employee.__doc__: 所有员工的基类</span><br><span class="line">Employee.__name__: Employee</span><br><span class="line">Employee.__module__: __main__</span><br><span class="line">Employee.__bases__: ()</span><br><span class="line">Employee.__dict__: &#123;&apos;__module__&apos;: &apos;__main__&apos;, &apos;displayCount&apos;: &lt;function displayCount at 0x10a939c80&gt;, &apos;empCount&apos;: 0, &apos;displayEmployee&apos;: &lt;function displayEmployee at 0x10a93caa0&gt;, &apos;__doc__&apos;: &apos;\xe6\x89\x80\xe6\x9c\x89\xe5\x91\x98\xe5\xb7\xa5\xe7\x9a\x84\xe5\x9f\xba\xe7\xb1\xbb&apos;, &apos;__init__&apos;: &lt;function __init__ at 0x10a939578&gt;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h2><p>析构函数 <strong>del</strong> ，<strong>del</strong>在对象销毁的时候被调用，当对象不再被使用时<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class Point:</span><br><span class="line">   def __init__( self, x=0, y=0):</span><br><span class="line">      self.x = x</span><br><span class="line">      self.y = y</span><br><span class="line">   def __del__(self):</span><br><span class="line">      class_name = self.__class__.__name__</span><br><span class="line">      print class_name, &quot;销毁&quot;</span><br><span class="line"> </span><br><span class="line">pt1 = Point()</span><br><span class="line">pt2 = pt1</span><br><span class="line">pt3 = pt1</span><br><span class="line">print id(pt1), id(pt2), id(pt3) # 打印对象的id</span><br><span class="line">del pt1</span><br><span class="line">del pt2</span><br><span class="line">del pt3</span><br></pre></td></tr></table></figure></p>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>面向对象的编程带来的主要好处之一是代码的重用，实现这种重用的方法之一是通过继承机制。</p>
<p>通过继承创建的新类称为子类或派生类，被继承的类称为基类、父类或超类。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class Parent:        # 定义父类</span><br><span class="line">   parentAttr = 100</span><br><span class="line">   def __init__(self):</span><br><span class="line">      print &quot;调用父类构造函数&quot;</span><br><span class="line"> </span><br><span class="line">   def parentMethod(self):</span><br><span class="line">      print &apos;调用父类方法&apos;</span><br><span class="line"> </span><br><span class="line">   def setAttr(self, attr):</span><br><span class="line">      Parent.parentAttr = attr</span><br><span class="line"> </span><br><span class="line">   def getAttr(self):</span><br><span class="line">      print &quot;父类属性 :&quot;, Parent.parentAttr</span><br><span class="line"> </span><br><span class="line">class Child(Parent): # 定义子类</span><br><span class="line">   def __init__(self):</span><br><span class="line">      print &quot;调用子类构造方法&quot;</span><br><span class="line"> </span><br><span class="line">   def childMethod(self):</span><br><span class="line">      print &apos;调用子类方法&apos;</span><br><span class="line"> </span><br><span class="line">c = Child()          # 实例化子类</span><br><span class="line">c.childMethod()      # 调用子类的方法</span><br><span class="line">c.parentMethod()     # 调用父类方法</span><br><span class="line">c.setAttr(200)       # 再次调用父类的方法 - 设置属性值</span><br><span class="line">c.getAttr()          # 再次调用父类的方法 - 获取属性值</span><br></pre></td></tr></table></figure></p>
<h2 id="类属性与方法"><a href="#类属性与方法" class="headerlink" title="类属性与方法"></a>类属性与方法</h2><h3 id="类的私有属性"><a href="#类的私有属性" class="headerlink" title="类的私有属性"></a>类的私有属性</h3><p><strong>private_attrs：两个下划线开头，声明该属性为私有，不能在类的外部被使用或直接访问。在类内部的方法中使用时 self.</strong>private_attrs。</p>
<h3 id="类的方法"><a href="#类的方法" class="headerlink" title="类的方法"></a>类的方法</h3><p>在类的内部，使用 def 关键字可以为类定义一个方法，与一般函数定义不同，类方法必须包含参数 self,且为第一个参数</p>
<h3 id="类的私有方法"><a href="#类的私有方法" class="headerlink" title="类的私有方法"></a>类的私有方法</h3><p><strong>private_method：两个下划线开头，声明该方法为私有方法，不能在类的外部调用。在类的内部调用 self.</strong>private_methods</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">class JustCounter:</span><br><span class="line">    __secretCount = 0  # 私有变量</span><br><span class="line">    publicCount = 0    # 公开变量</span><br><span class="line"> </span><br><span class="line">    def count(self):</span><br><span class="line">        self.__secretCount += 1</span><br><span class="line">        self.publicCount += 1</span><br><span class="line">        print self.__secretCount</span><br><span class="line"> </span><br><span class="line">counter = JustCounter()</span><br><span class="line">counter.count()</span><br><span class="line">counter.count()</span><br><span class="line">print counter.publicCount</span><br><span class="line">print counter.__secretCount  # 报错，实例不能访问私有变量</span><br></pre></td></tr></table></figure>
<h2 id="单下划线、双下划线、头尾双下划线说明："><a href="#单下划线、双下划线、头尾双下划线说明：" class="headerlink" title="单下划线、双下划线、头尾双下划线说明："></a>单下划线、双下划线、头尾双下划线说明：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__foo__: 定义的是特殊方法，一般是系统定义名字 ，类似 __init__() 之类的。</span><br><span class="line"></span><br><span class="line">_foo: 以单下划线开头的表示的是 protected 类型的变量，即保护类型只能允许其本身与子类进行访问，不能用于 from module import *</span><br><span class="line"></span><br><span class="line">__foo: 双下划线的表示的是私有类型(private)的变量, 只能是允许这个类本身进行访问了。</span><br></pre></td></tr></table></figure>
<h1 id="Python-正则表达式"><a href="#Python-正则表达式" class="headerlink" title="Python 正则表达式"></a>Python 正则表达式</h1><h2 id="re-match函数"><a href="#re-match函数" class="headerlink" title="re.match函数"></a>re.match函数</h2><p>re.match 尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*- </span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line">print(re.match(&apos;www&apos;, &apos;www.runoob.com&apos;).span())  # 在起始位置匹配</span><br><span class="line">print(re.match(&apos;com&apos;, &apos;www.runoob.com&apos;))         # 不在起始位置匹配</span><br></pre></td></tr></table></figure>
<p>使用group(num) 或 groups() 匹配对象函数来获取匹配表达式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">匹配对象方法	描述</span><br><span class="line">group(num=0)	匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</span><br><span class="line">groups()	返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</span><br></pre></td></tr></table></figure></p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">line = &quot;Cats are smarter than dogs&quot;</span><br><span class="line"> </span><br><span class="line">matchObj = re.match( r&apos;(.*) are (.*?) .*&apos;, line, re.M|re.I)</span><br><span class="line"> </span><br><span class="line">if matchObj:</span><br><span class="line">   print &quot;matchObj.group() : &quot;, matchObj.group()</span><br><span class="line">   print &quot;matchObj.group(1) : &quot;, matchObj.group(1)</span><br><span class="line">   print &quot;matchObj.group(2) : &quot;, matchObj.group(2)</span><br><span class="line">else:</span><br><span class="line">   print &quot;No match!!&quot;</span><br></pre></td></tr></table></figure></p>
<p>正则表达式修饰符 - 可选标志<br>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过按位 OR(|) 它们来指定。如 re.I | re.M 被设置成 I 和 M 标志：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">修饰符	描述</span><br><span class="line">re.I	使匹配对大小写不敏感</span><br><span class="line">re.L	做本地化识别（locale-aware）匹配</span><br><span class="line">re.M	多行匹配，影响 ^ 和 $</span><br><span class="line">re.S	使 . 匹配包括换行在内的所有字符</span><br><span class="line">re.U	根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</span><br><span class="line">re.X	该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</span><br></pre></td></tr></table></figure></p>
<h2 id="re-search方法"><a href="#re-search方法" class="headerlink" title="re.search方法"></a>re.search方法</h2><p>re.search 扫描整个字符串并返回第一个成功的匹配。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*- </span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line">print(re.search(&apos;www&apos;, &apos;www.runoob.com&apos;).span())  # 在起始位置匹配</span><br><span class="line">print(re.search(&apos;com&apos;, &apos;www.runoob.com&apos;).span())         # 不在起始位置匹配</span><br></pre></td></tr></table></figure></p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">line = &quot;Cats are smarter than dogs&quot;;</span><br><span class="line"> </span><br><span class="line">searchObj = re.search( r&apos;(.*) are (.*?) .*&apos;, line, re.M|re.I)</span><br><span class="line"> </span><br><span class="line">if searchObj:</span><br><span class="line">   print &quot;searchObj.group() : &quot;, searchObj.group()</span><br><span class="line">   print &quot;searchObj.group(1) : &quot;, searchObj.group(1)</span><br><span class="line">   print &quot;searchObj.group(2) : &quot;, searchObj.group(2)</span><br><span class="line">else:</span><br><span class="line">   print &quot;Nothing found!!&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="re-match与re-search的区别"><a href="#re-match与re-search的区别" class="headerlink" title="re.match与re.search的区别"></a>re.match与re.search的区别</h2><p>re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。</p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">line = &quot;Cats are smarter than dogs&quot;;</span><br><span class="line"> </span><br><span class="line">matchObj = re.match( r&apos;dogs&apos;, line, re.M|re.I)</span><br><span class="line">if matchObj:</span><br><span class="line">   print &quot;match --&gt; matchObj.group() : &quot;, matchObj.group()</span><br><span class="line">else:</span><br><span class="line">   print &quot;No match!!&quot;</span><br><span class="line"> </span><br><span class="line">matchObj = re.search( r&apos;dogs&apos;, line, re.M|re.I)</span><br><span class="line">if matchObj:</span><br><span class="line">   print &quot;search --&gt; matchObj.group() : &quot;, matchObj.group()</span><br><span class="line">else:</span><br><span class="line">   print &quot;No match!!&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="检索和替换"><a href="#检索和替换" class="headerlink" title="检索和替换"></a>检索和替换</h2><p>Python 的 re 模块提供了re.sub用于替换字符串中的匹配项。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">phone = &quot;2004-959-559 # 这是一个国外电话号码&quot;</span><br><span class="line"> </span><br><span class="line"># 删除字符串中的 Python注释 </span><br><span class="line">num = re.sub(r&apos;#.*$&apos;, &quot;&quot;, phone)</span><br><span class="line">print &quot;电话号码是: &quot;, num</span><br><span class="line"> </span><br><span class="line"># 删除非数字(-)的字符串 </span><br><span class="line">num = re.sub(r&apos;\D&apos;, &quot;&quot;, phone)</span><br><span class="line">print &quot;电话号码是 : &quot;, num</span><br></pre></td></tr></table></figure></p>
<p>repl 参数是一个函数<br>以下实例中将字符串中的匹配的数字乘以 2：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line"># 将匹配的数字乘以 2</span><br><span class="line">def double(matched):</span><br><span class="line">    value = int(matched.group(&apos;value&apos;))</span><br><span class="line">    return str(value * 2)</span><br><span class="line"> </span><br><span class="line">s = &apos;A23G4HFD567&apos;</span><br><span class="line">print(re.sub(&apos;(?P&lt;value&gt;\d+)&apos;, double, s))</span><br></pre></td></tr></table></figure></p>
<p>re.compile 函数<br>compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match() 和 search() 这两个函数使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;import re</span><br><span class="line">&gt;&gt;&gt; pattern = re.compile(r&apos;\d+&apos;)                    # 用于匹配至少一个数字</span><br><span class="line">&gt;&gt;&gt; m = pattern.match(&apos;one12twothree34four&apos;)        # 查找头部，没有匹配</span><br><span class="line">&gt;&gt;&gt; print m</span><br><span class="line">None</span><br><span class="line">&gt;&gt;&gt; m = pattern.match(&apos;one12twothree34four&apos;, 2, 10) # 从&apos;e&apos;的位置开始匹配，没有匹配</span><br><span class="line">&gt;&gt;&gt; print m</span><br><span class="line">None</span><br><span class="line">&gt;&gt;&gt; m = pattern.match(&apos;one12twothree34four&apos;, 3, 10) # 从&apos;1&apos;的位置开始匹配，正好匹配</span><br><span class="line">&gt;&gt;&gt; print m                                         # 返回一个 Match 对象</span><br><span class="line">&lt;_sre.SRE_Match object at 0x10a42aac0&gt;</span><br><span class="line">&gt;&gt;&gt; m.group(0)   # 可省略 0</span><br><span class="line">&apos;12&apos;</span><br><span class="line">&gt;&gt;&gt; m.start(0)   # 可省略 0</span><br><span class="line">3</span><br><span class="line">&gt;&gt;&gt; m.end(0)     # 可省略 0</span><br><span class="line">5</span><br><span class="line">&gt;&gt;&gt; m.span(0)    # 可省略 0</span><br><span class="line">(3, 5)</span><br></pre></td></tr></table></figure></p>
<h2 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h2><p>在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:UTF8 -*-</span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">pattern = re.compile(r&apos;\d+&apos;)   # 查找数字</span><br><span class="line">result1 = pattern.findall(&apos;runoob 123 google 456&apos;)</span><br><span class="line">result2 = pattern.findall(&apos;run88oob123google456&apos;, 0, 10)</span><br><span class="line"> </span><br><span class="line">print(result1)</span><br><span class="line">print(result2)</span><br></pre></td></tr></table></figure>
<h2 id="re-finditer"><a href="#re-finditer" class="headerlink" title="re.finditer"></a>re.finditer</h2><p>和 findall 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import re</span><br><span class="line"> </span><br><span class="line">it = re.finditer(r&quot;\d+&quot;,&quot;12a32bc43jf3&quot;) </span><br><span class="line">for match in it: </span><br><span class="line">    print (match.group() )</span><br></pre></td></tr></table></figure></p>
<h2 id="re-split"><a href="#re-split" class="headerlink" title="re.split"></a>re.split</h2><p>split 方法按照能够匹配的子串将字符串分割后返回列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;import re</span><br><span class="line">&gt;&gt;&gt; re.split(&apos;\W+&apos;, &apos;runoob, runoob, runoob.&apos;)</span><br><span class="line">[&apos;runoob&apos;, &apos;runoob&apos;, &apos;runoob&apos;, &apos;&apos;]</span><br><span class="line">&gt;&gt;&gt; re.split(&apos;(\W+)&apos;, &apos; runoob, runoob, runoob.&apos;) </span><br><span class="line">[&apos;&apos;, &apos; &apos;, &apos;runoob&apos;, &apos;, &apos;, &apos;runoob&apos;, &apos;, &apos;, &apos;runoob&apos;, &apos;.&apos;, &apos;&apos;]</span><br><span class="line">&gt;&gt;&gt; re.split(&apos;\W+&apos;, &apos; runoob, runoob, runoob.&apos;, 1) </span><br><span class="line">[&apos;&apos;, &apos;runoob, runoob, runoob.&apos;]</span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; re.split(&apos;a*&apos;, &apos;hello world&apos;)   # 对于一个找不到匹配的字符串而言，split 不会对其作出分割</span><br><span class="line">[&apos;hello world&apos;]</span><br></pre></td></tr></table></figure></p>
<h2 id="正则表达式修饰符-可选标志"><a href="#正则表达式修饰符-可选标志" class="headerlink" title="正则表达式修饰符 - 可选标志"></a>正则表达式修饰符 - 可选标志</h2><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过按位 OR(|) 它们来指定。如 re.I | re.M 被设置成 I 和 M 标志：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">修饰符	描述</span><br><span class="line">re.I	使匹配对大小写不敏感</span><br><span class="line">re.L	做本地化识别（locale-aware）匹配</span><br><span class="line">re.M	多行匹配，影响 ^ 和 $</span><br><span class="line">re.S	使 . 匹配包括换行在内的所有字符</span><br><span class="line">re.U	根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</span><br><span class="line">re.X	该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</span><br></pre></td></tr></table></figure></p>
<h2 id="正则表达式模式"><a href="#正则表达式模式" class="headerlink" title="正则表达式模式"></a>正则表达式模式</h2><p>模式字符串使用特殊的语法来表示一个正则表达式：</p>
<p>字母和数字表示他们自身。一个正则表达式模式中的字母和数字匹配同样的字符串。</p>
<p>多数字母和数字前加一个反斜杠时会拥有不同的含义。</p>
<p>标点符号只有被转义时才匹配自身，否则它们表示特殊的含义。</p>
<p>反斜杠本身需要使用反斜杠转义。</p>
<p>由于正则表达式通常都包含反斜杠，所以你最好使用原始字符串来表示它们。模式元素(如 r’\t’，等价于 ‘\t’)匹配相应的特殊字符。</p>
<p>下表列出了正则表达式模式语法中的特殊元素。如果你使用模式的同时提供了可选的标志参数，某些模式元素的含义会改变。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">模式	描述</span><br><span class="line">^	匹配字符串的开头</span><br><span class="line">$	匹配字符串的末尾。</span><br><span class="line">.	匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</span><br><span class="line">[...]	用来表示一组字符,单独列出：[amk] 匹配 &apos;a&apos;，&apos;m&apos;或&apos;k&apos;</span><br><span class="line">[^...]	不在[]中的字符：[^abc] 匹配除了a,b,c之外的字符。</span><br><span class="line">re*	匹配0个或多个的表达式。</span><br><span class="line">re+	匹配1个或多个的表达式。</span><br><span class="line">re?	匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</span><br><span class="line">re&#123; n&#125;	精确匹配 n 个前面表达式。例如， o&#123;2&#125; 不能匹配 &quot;Bob&quot; 中的 &quot;o&quot;，但是能匹配 &quot;food&quot; 中的两个 o。</span><br><span class="line">re&#123; n,&#125;	匹配 n 个前面表达式。例如， o&#123;2,&#125; 不能匹配&quot;Bob&quot;中的&quot;o&quot;，但能匹配 &quot;foooood&quot;中的所有 o。&quot;o&#123;1,&#125;&quot; 等价于 &quot;o+&quot;。&quot;o&#123;0,&#125;&quot; 则等价于 &quot;o*&quot;。</span><br><span class="line">re&#123; n, m&#125;	匹配 n 到 m 次由前面的正则表达式定义的片段，贪婪方式</span><br><span class="line">a| b	匹配a或b</span><br><span class="line">(re)	匹配括号内的表达式，也表示一个组</span><br><span class="line">(?imx)	正则表达式包含三种可选标志：i, m, 或 x 。只影响括号中的区域。</span><br><span class="line">(?-imx)	正则表达式关闭 i, m, 或 x 可选标志。只影响括号中的区域。</span><br><span class="line">(?: re)	类似 (...), 但是不表示一个组</span><br><span class="line">(?imx: re)	在括号中使用i, m, 或 x 可选标志</span><br><span class="line">(?-imx: re)	在括号中不使用i, m, 或 x 可选标志</span><br><span class="line">(?#...)	注释.</span><br><span class="line">(?= re)	前向肯定界定符。如果所含正则表达式，以 ... 表示，在当前位置成功匹配时成功，否则失败。但一旦所含表达式已经尝试，匹配引擎根本没有提高；模式的剩余部分还要尝试界定符的右边。</span><br><span class="line">(?! re)	前向否定界定符。与肯定界定符相反；当所含表达式不能在字符串当前位置匹配时成功</span><br><span class="line">(?&gt; re)	匹配的独立模式，省去回溯。</span><br><span class="line">\w	匹配字母数字及下划线</span><br><span class="line">\W	匹配非字母数字及下划线</span><br><span class="line">\s	匹配任意空白字符，等价于 [\t\n\r\f].</span><br><span class="line">\S	匹配任意非空字符</span><br><span class="line">\d	匹配任意数字，等价于 [0-9].</span><br><span class="line">\D	匹配任意非数字</span><br><span class="line">\A	匹配字符串开始</span><br><span class="line">\Z	匹配字符串结束，如果是存在换行，只匹配到换行前的结束字符串。</span><br><span class="line">\z	匹配字符串结束</span><br><span class="line">\G	匹配最后匹配完成的位置。</span><br><span class="line">\b	匹配一个单词边界，也就是指单词和空格间的位置。例如， &apos;er\b&apos; 可以匹配&quot;never&quot; 中的 &apos;er&apos;，但不能匹配 &quot;verb&quot; 中的 &apos;er&apos;。</span><br><span class="line">\B	匹配非单词边界。&apos;er\B&apos; 能匹配 &quot;verb&quot; 中的 &apos;er&apos;，但不能匹配 &quot;never&quot; 中的 &apos;er&apos;。</span><br><span class="line">\n, \t, 等.	匹配一个换行符。匹配一个制表符。等</span><br><span class="line">\1...\9	匹配第n个分组的内容。</span><br><span class="line">\10	匹配第n个分组的内容，如果它经匹配。否则指的是八进制字符码的表达式。</span><br></pre></td></tr></table></figure></p>
<h2 id="正则表达式实例"><a href="#正则表达式实例" class="headerlink" title="正则表达式实例"></a>正则表达式实例</h2><p>字符匹配<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">实例	描述</span><br><span class="line">python	匹配 &quot;python&quot;.</span><br><span class="line">字符类</span><br><span class="line">实例	描述</span><br><span class="line">[Pp]ython	匹配 &quot;Python&quot; 或 &quot;python&quot;</span><br><span class="line">rub[ye]	匹配 &quot;ruby&quot; 或 &quot;rube&quot;</span><br><span class="line">[aeiou]	匹配中括号内的任意一个字母</span><br><span class="line">[0-9]	匹配任何数字。类似于 [0123456789]</span><br><span class="line">[a-z]	匹配任何小写字母</span><br><span class="line">[A-Z]	匹配任何大写字母</span><br><span class="line">[a-zA-Z0-9]	匹配任何字母及数字</span><br><span class="line">[^aeiou]	除了aeiou字母以外的所有字符</span><br><span class="line">[^0-9]	匹配除了数字外的字符</span><br></pre></td></tr></table></figure></p>
<p>特殊字符类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">实例	描述</span><br><span class="line">.	匹配除 &quot;\n&quot; 之外的任何单个字符。要匹配包括 &apos;\n&apos; 在内的任何字符，请使用象 &apos;[.\n]&apos; 的模式。</span><br><span class="line">\d	匹配一个数字字符。等价于 [0-9]。</span><br><span class="line">\D	匹配一个非数字字符。等价于 [^0-9]。</span><br><span class="line">\s	匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。</span><br><span class="line">\S	匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</span><br><span class="line">\w	匹配包括下划线的任何单词字符。等价于&apos;[A-Za-z0-9_]&apos;。</span><br><span class="line">\W	匹配任何非单词字符。等价于 &apos;[^A-Za-z0-9_]&apos;。</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-CGI编程"><a href="#Python-CGI编程" class="headerlink" title="Python CGI编程"></a>Python CGI编程</h1><h2 id="Web-服务器支持及配置"><a href="#Web-服务器支持及配置" class="headerlink" title="Web 服务器支持及配置"></a>Web 服务器支持及配置</h2><p>在你进行 CGI 编程前，确保您的 Web 服务器支持 CGI 及已经配置了 CGI 的处理程序。</p>
<p>Apache 支持 CGI 配置：</p>
<p>设置好CGI目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ScriptAlias /cgi-bin/ /var/www/cgi-bin/</span><br></pre></td></tr></table></figure></p>
<p>所有的HTTP服务器执行 CGI 程序都保存在一个预先配置的目录。这个目录被称为 CGI 目录，并按照惯例，它被命名为 /var/www/cgi-bin 目录。</p>
<p>CGI 文件的扩展名为 .cgi，python 也可以使用 .py 扩展名。</p>
<p>默认情况下，Linux 服务器配置运行的 cgi-bin 目录中为 /var/www。</p>
<p>如果你想指定其他运行 CGI 脚本的目录，可以修改 httpd.conf 配置文件，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;</span><br><span class="line">   AllowOverride None</span><br><span class="line">   Options +ExecCGI</span><br><span class="line">   Order allow,deny</span><br><span class="line">   Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="第一个CGI程序"><a href="#第一个CGI程序" class="headerlink" title="第一个CGI程序"></a>第一个CGI程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print                               # 空行，告诉服务器结束头部</span><br><span class="line">print &apos;&lt;html&gt;&apos;</span><br><span class="line">print &apos;&lt;head&gt;&apos;</span><br><span class="line">print &apos;&lt;meta charset=&quot;utf-8&quot;&gt;&apos;</span><br><span class="line">print &apos;&lt;title&gt;Hello World - 我的第一个 CGI 程序！&lt;/title&gt;&apos;</span><br><span class="line">print &apos;&lt;/head&gt;&apos;</span><br><span class="line">print &apos;&lt;body&gt;&apos;</span><br><span class="line">print &apos;&lt;h2&gt;Hello World! 我是来自菜鸟教程的第一CGI程序&lt;/h2&gt;&apos;</span><br><span class="line">print &apos;&lt;/body&gt;&apos;</span><br><span class="line">print &apos;&lt;/html&gt;&apos;</span><br></pre></td></tr></table></figure>
<p>文件保存后修改 hello.py，修改文件权限为 755：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 hello.py</span><br></pre></td></tr></table></figure></p>
<p>以上程序在浏览器访问 <a href="http://localhost/cgi-bin/hello.py" target="_blank" rel="noopener">http://localhost/cgi-bin/hello.py</a> 显示结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World! 我是来自菜鸟教程的第一CGI程序</span><br></pre></td></tr></table></figure></p>
<h2 id="HTTP头部"><a href="#HTTP头部" class="headerlink" title="HTTP头部"></a>HTTP头部</h2><p>hello.py文件内容中的” Content-type:text/html”即为HTTP头部的一部分，它会发送给浏览器告诉浏览器文件的内容类型。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Content-type:	请求的与实体对应的MIME信息。例如: Content-type:text/html</span><br><span class="line">Expires: Date	响应过期的日期和时间</span><br><span class="line">Location: URL	用来重定向接收方到非请求URL的位置来完成请求或标识新的资源</span><br><span class="line">Last-modified: Date	请求资源的最后修改时间</span><br><span class="line">Content-length: N	请求的内容长度</span><br><span class="line">Set-Cookie: String	设置Http Cookie</span><br></pre></td></tr></table></figure></p>
<h2 id="CGI环境变量"><a href="#CGI环境变量" class="headerlink" title="CGI环境变量"></a>CGI环境变量</h2><p>所有的CGI程序都接收以下的环境变量，这些变量在CGI程序中发挥了重要的作用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">变量名	描述</span><br><span class="line">CONTENT_TYPE	这个环境变量的值指示所传递来的信息的MIME类型。目前，环境变量CONTENT_TYPE一般都是：application/x-www-form-urlencoded,他表示数据来自于HTML表单。</span><br><span class="line">CONTENT_LENGTH	如果服务器与CGI程序信息的传递方式是POST，这个环境变量即使从标准输入STDIN中可以读到的有效数据的字节数。这个环境变量在读取所输入的数据时必须使用。</span><br><span class="line">HTTP_COOKIE	客户机内的 COOKIE 内容。</span><br><span class="line">HTTP_USER_AGENT	提供包含了版本数或其他专有数据的客户浏览器信息。</span><br><span class="line">PATH_INFO	这个环境变量的值表示紧接在CGI程序名之后的其他路径信息。它常常作为CGI程序的参数出现。</span><br><span class="line">QUERY_STRING	如果服务器与CGI程序信息的传递方式是GET，这个环境变量的值即使所传递的信息。这个信息经跟在CGI程序名的后面，两者中间用一个问号&apos;?&apos;分隔。</span><br><span class="line">REMOTE_ADDR	这个环境变量的值是发送请求的客户机的IP地址，例如上面的192.168.1.67。这个值总是存在的。而且它是Web客户机需要提供给Web服务器的唯一标识，可以在CGI程序中用它来区分不同的Web客户机。</span><br><span class="line">REMOTE_HOST	这个环境变量的值包含发送CGI请求的客户机的主机名。如果不支持你想查询，则无需定义此环境变量。</span><br><span class="line">REQUEST_METHOD	提供脚本被调用的方法。对于使用 HTTP/1.0 协议的脚本，仅 GET 和 POST 有意义。</span><br><span class="line">SCRIPT_FILENAME	CGI脚本的完整路径</span><br><span class="line">SCRIPT_NAME	CGI脚本的的名称</span><br><span class="line">SERVER_NAME	这是你的 WEB 服务器的主机名、别名或IP地址。</span><br><span class="line">SERVER_SOFTWARE	这个环境变量的值包含了调用CGI程序的HTTP服务器的名称和版本号。例如，上面的值为Apache/2.2.14(Unix)</span><br></pre></td></tr></table></figure></p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"># filename:test.py</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">print &quot;Content-type: text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;b&gt;环境变量&lt;/b&gt;&lt;br&gt;&quot;;</span><br><span class="line">print &quot;&lt;ul&gt;&quot;</span><br><span class="line">for key in os.environ.keys():</span><br><span class="line">    print &quot;&lt;li&gt;&lt;span style=&apos;color:green&apos;&gt;%30s &lt;/span&gt; : %s &lt;/li&gt;&quot; % (key,os.environ[key])</span><br><span class="line">print &quot;&lt;/ul&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用GET方法传输数据"><a href="#使用GET方法传输数据" class="headerlink" title="使用GET方法传输数据"></a>使用GET方法传输数据</h2><p>GET方法发送编码后的用户信息到服务端，数据信息包含在请求页面的URL上，以”?”号分割, 如下所示：</p>
<p><a href="http://www.test.com/cgi-bin/hello.py?key1=value1&amp;key2=value2" target="_blank" rel="noopener">http://www.test.com/cgi-bin/hello.py?key1=value1&amp;key2=value2</a> 有关 GET 请求的其他一些注释：<br>GET 请求可被缓存<br>GET 请求保留在浏览器历史记录中<br>GET 请求可被收藏为书签<br>GET 请求不应在处理敏感数据时使用<br>GET 请求有长度限制<br>GET 请求只应当用于取回数据<br>简单的url实例：GET方法<br>以下是一个简单的URL，使用GET方法向hello_get.py程序发送两个参数：</p>
<p>/cgi-bin/test.py?name=菜鸟教程&amp;url=<a href="http://www.runoob.com" target="_blank" rel="noopener">http://www.runoob.com</a><br>以下为hello_get.py文件的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># filename：test.py</span><br><span class="line"></span><br><span class="line"># CGI处理模块</span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage 的实例化</span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 获取数据</span><br><span class="line">site_name = form.getvalue(&apos;name&apos;)</span><br><span class="line">site_url  = form.getvalue(&apos;url&apos;)</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt;%s官网：%s&lt;/h2&gt;&quot; % (site_name, site_url)</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>文件保存后修改 hello_get.py，修改文件权限为 755：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 hello_get.py</span><br></pre></td></tr></table></figure></p>
<p>简单的表单实例：GET方法<br>以下是一个通过HTML的表单使用GET方法向服务器发送两个数据，提交的服务器脚本同样是hello_get.py文件，hello_get.html 代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/hello_get.py&quot; method=&quot;get&quot;&gt;</span><br><span class="line">站点名称: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;  &lt;br /&gt;</span><br><span class="line"></span><br><span class="line">站点 URL: &lt;input type=&quot;text&quot; name=&quot;url&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>默认情况下 cgi-bin 目录只能存放脚本文件，我们将 hello_get.html 存储在 test 目录下，修改文件权限为 755：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 hello_get.html</span><br></pre></td></tr></table></figure></p>
<h2 id="使用POST方法传递数据"><a href="#使用POST方法传递数据" class="headerlink" title="使用POST方法传递数据"></a>使用POST方法传递数据</h2><p>使用POST方法向服务器传递数据是更安全可靠的，像一些敏感信息如用户密码等需要使用POST传输数据。</p>
<p>以下同样是hello_get.py ，它也可以处理浏览器提交的POST表单数据:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># CGI处理模块</span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage 的实例化</span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 获取数据</span><br><span class="line">site_name = form.getvalue(&apos;name&apos;)</span><br><span class="line">site_url  = form.getvalue(&apos;url&apos;)</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt;%s官网：%s&lt;/h2&gt;&quot; % (site_name, site_url)</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>以下为表单通过POST方法（method=”post”）向服务器脚本 hello_get.py 提交数据:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/hello_get.py&quot; method=&quot;post&quot;&gt;</span><br><span class="line">站点名称: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;  &lt;br /&gt;</span><br><span class="line"></span><br><span class="line">站点 URL: &lt;input type=&quot;text&quot; name=&quot;url&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="通过CGI程序传递checkbox数据"><a href="#通过CGI程序传递checkbox数据" class="headerlink" title="通过CGI程序传递checkbox数据"></a>通过CGI程序传递checkbox数据</h2><p>checkbox用于提交一个或者多个选项数据，HTML代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/checkbox.py&quot; method=&quot;POST&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot; name=&quot;runoob&quot; value=&quot;on&quot; /&gt; 菜鸟教程</span><br><span class="line">&lt;input type=&quot;checkbox&quot; name=&quot;google&quot; value=&quot;on&quot; /&gt; Google</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;选择站点&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>以下为 checkbox.py 文件的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 引入 CGI 处理模块 </span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage的实例 </span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 接收字段数据</span><br><span class="line">if form.getvalue(&apos;google&apos;):</span><br><span class="line">   google_flag = &quot;是&quot;</span><br><span class="line">else:</span><br><span class="line">   google_flag = &quot;否&quot;</span><br><span class="line"></span><br><span class="line">if form.getvalue(&apos;runoob&apos;):</span><br><span class="line">   runoob_flag = &quot;是&quot;</span><br><span class="line">else:</span><br><span class="line">   runoob_flag = &quot;否&quot;</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt; 菜鸟教程是否选择了 : %s&lt;/h2&gt;&quot; % runoob_flag</span><br><span class="line">print &quot;&lt;h2&gt; Google 是否选择了 : %s&lt;/h2&gt;&quot; % google_flag</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>修改 checkbox.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 checkbox.py</span><br></pre></td></tr></table></figure></p>
<p>通过CGI程序传递Radio数据<br>Radio 只向服务器传递一个数据，HTML代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/radiobutton.py&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;site&quot; value=&quot;runoob&quot; /&gt; 菜鸟教程</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;site&quot; value=&quot;google&quot; /&gt; Google</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>radiobutton.py 脚本代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 引入 CGI 处理模块 </span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage的实例 </span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 接收字段数据</span><br><span class="line">if form.getvalue(&apos;site&apos;):</span><br><span class="line">   site = form.getvalue(&apos;site&apos;)</span><br><span class="line">else:</span><br><span class="line">   site = &quot;提交数据为空&quot;</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt; 选中的网站是 %s&lt;/h2&gt;&quot; % site</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>修改 radiobutton.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 radiobutton.py</span><br></pre></td></tr></table></figure></p>
<p>通过CGI程序传递 Textarea 数据<br>Textarea 向服务器传递多行数据，HTML代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/textarea.py&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">&lt;textarea name=&quot;textcontent&quot; cols=&quot;40&quot; rows=&quot;4&quot;&gt;</span><br><span class="line">在这里输入内容...</span><br><span class="line">&lt;/textarea&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>textarea.py 脚本代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 引入 CGI 处理模块 </span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage的实例 </span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 接收字段数据</span><br><span class="line">if form.getvalue(&apos;textcontent&apos;):</span><br><span class="line">   text_content = form.getvalue(&apos;textcontent&apos;)</span><br><span class="line">else:</span><br><span class="line">   text_content = &quot;没有内容&quot;</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt; 输入的内容是：%s&lt;/h2&gt;&quot; % text_content</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>修改 textarea.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 textarea.py</span><br></pre></td></tr></table></figure></p>
<h2 id="通过CGI程序传递下拉数据。"><a href="#通过CGI程序传递下拉数据。" class="headerlink" title="通过CGI程序传递下拉数据。"></a>通过CGI程序传递下拉数据。</h2><p>HTML 下拉框代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/cgi-bin/dropdown.py&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">&lt;select name=&quot;dropdown&quot;&gt;</span><br><span class="line">&lt;option value=&quot;runoob&quot; selected&gt;菜鸟教程&lt;/option&gt;</span><br><span class="line">&lt;option value=&quot;google&quot;&gt;Google&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>dropdown.py 脚本代码如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 引入 CGI 处理模块 </span><br><span class="line">import cgi, cgitb </span><br><span class="line"></span><br><span class="line"># 创建 FieldStorage的实例 </span><br><span class="line">form = cgi.FieldStorage() </span><br><span class="line"></span><br><span class="line"># 接收字段数据</span><br><span class="line">if form.getvalue(&apos;dropdown&apos;):</span><br><span class="line">   dropdown_value = form.getvalue(&apos;dropdown&apos;)</span><br><span class="line">else:</span><br><span class="line">   dropdown_value = &quot;没有内容&quot;</span><br><span class="line"></span><br><span class="line">print &quot;Content-type:text/html&quot;</span><br><span class="line">print</span><br><span class="line">print &quot;&lt;html&gt;&quot;</span><br><span class="line">print &quot;&lt;head&gt;&quot;</span><br><span class="line">print &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot;</span><br><span class="line">print &quot;&lt;title&gt;菜鸟教程 CGI 测试实例&lt;/title&gt;&quot;</span><br><span class="line">print &quot;&lt;/head&gt;&quot;</span><br><span class="line">print &quot;&lt;body&gt;&quot;</span><br><span class="line">print &quot;&lt;h2&gt; 选中的选项是：%s&lt;/h2&gt;&quot; % dropdown_value</span><br><span class="line">print &quot;&lt;/body&gt;&quot;</span><br><span class="line">print &quot;&lt;/html&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p>修改 dropdown.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 dropdown.py</span><br></pre></td></tr></table></figure></p>
<h2 id="CGI中使用Cookie"><a href="#CGI中使用Cookie" class="headerlink" title="CGI中使用Cookie"></a>CGI中使用Cookie</h2><p>在 http 协议一个很大的缺点就是不对用户身份的进行判断，这样给编程人员带来很大的不便， 而 cookie 功能的出现弥补了这个不足。</p>
<p>cookie 就是在客户访问脚本的同时，通过客户的浏览器，在客户硬盘上写入纪录数据 ，当下次客户访问脚本时取回数据信息，从而达到身份判别的功能，cookie 常用在身份校验中。</p>
<p>　<br>cookie的语法</p>
<p>http cookie的发送是通过http头部来实现的，他早于文件的传递，头部set-cookie的语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set-cookie:name=name;expires=date;path=path;domain=domain;secure </span><br><span class="line">name=name: 需要设置cookie的值(name不能使用&quot;;&quot;和&quot;,&quot;号),有多个name值时用 &quot;;&quot; 分隔，例如：name1=name1;name2=name2;name3=name3。</span><br><span class="line">expires=date: cookie的有效期限,格式： expires=&quot;Wdy,DD-Mon-YYYY HH:MM:SS&quot;</span><br><span class="line">path=path: 设置cookie支持的路径,如果path是一个路径，则cookie对这个目录下的所有文件及子目录生效，例如： path=&quot;/cgi-bin/&quot;，如果path是一个文件，则cookie指对这个文件生效，例如：path=&quot;/cgi-bin/cookie.cgi&quot;。</span><br><span class="line">domain=domain: 对cookie生效的域名，例如：domain=&quot;www.runoob.com&quot;</span><br><span class="line">secure: 如果给出此标志，表示cookie只能通过SSL协议的https服务器来传递。</span><br><span class="line">cookie的接收是通过设置环境变量HTTP_COOKIE来实现的，CGI程序可以通过检索该变量获取cookie信息。</span><br></pre></td></tr></table></figure></p>
<p>Cookie设置</p>
<p>Cookie的设置非常简单，cookie会在http头部单独发送。以下实例在cookie中设置了name 和 expires：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"># </span><br><span class="line">print &apos;Content-Type: text/html&apos;</span><br><span class="line">print &apos;Set-Cookie: name=&quot;菜鸟教程&quot;;expires=Wed, 28 Aug 2016 18:30:00 GMT&apos;</span><br><span class="line">print</span><br><span class="line">print &quot;&quot;&quot;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;Cookie set OK!&lt;/h1&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure></p>
<p>将以上代码保存到 cookie_set.py，并修改 cookie_set.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 cookie_set.py</span><br></pre></td></tr></table></figure></p>
<p>以上实例使用了 Set-Cookie 头信息来设置Cookie信息，可选项中设置了Cookie的其他属性，如过期时间Expires，域名Domain，路径Path。这些信息设置在 “Content-type:text/html”之前。</p>
<h2 id="检索Cookie信息"><a href="#检索Cookie信息" class="headerlink" title="检索Cookie信息"></a>检索Cookie信息</h2><p>Cookie信息检索页非常简单，Cookie信息存储在CGI的环境变量HTTP_COOKIE中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># 导入模块</span><br><span class="line">import os</span><br><span class="line">import Cookie</span><br><span class="line"></span><br><span class="line">print &quot;Content-type: text/html&quot;</span><br><span class="line">print</span><br><span class="line"></span><br><span class="line">print &quot;&quot;&quot;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;读取cookie信息&lt;/h1&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">if &apos;HTTP_COOKIE&apos; in os.environ:</span><br><span class="line">    cookie_string=os.environ.get(&apos;HTTP_COOKIE&apos;)</span><br><span class="line">    c=Cookie.SimpleCookie()</span><br><span class="line">    c.load(cookie_string)</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        data=c[&apos;name&apos;].value</span><br><span class="line">        print &quot;cookie data: &quot;+data+&quot;&lt;br&gt;&quot;</span><br><span class="line">    except KeyError:</span><br><span class="line">        print &quot;cookie 没有设置或者已过去&lt;br&gt;&quot;</span><br><span class="line">print &quot;&quot;&quot;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure></p>
<p>将以上代码保存到 cookie_get.py，并修改 cookie_get.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 cookie_get.py</span><br></pre></td></tr></table></figure></p>
<h2 id="文件上传实例"><a href="#文件上传实例" class="headerlink" title="文件上传实例"></a>文件上传实例</h2><p>HTML设置上传文件的表单需要设置 enctype 属性为 multipart/form-data，代码如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;form enctype=&quot;multipart/form-data&quot; </span><br><span class="line">                     action=&quot;/cgi-bin/save_file.py&quot; method=&quot;post&quot;&gt;</span><br><span class="line">   &lt;p&gt;选中文件: &lt;input type=&quot;file&quot; name=&quot;filename&quot; /&gt;&lt;/p&gt;</span><br><span class="line">   &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;上传&quot; /&gt;&lt;/p&gt;</span><br><span class="line">   &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>save_file.py脚本文件代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import cgi, os</span><br><span class="line">import cgitb; cgitb.enable()</span><br><span class="line"></span><br><span class="line">form = cgi.FieldStorage()</span><br><span class="line"></span><br><span class="line"># 获取文件名</span><br><span class="line">fileitem = form[&apos;filename&apos;]</span><br><span class="line"></span><br><span class="line"># 检测文件是否上传</span><br><span class="line">if fileitem.filename:</span><br><span class="line">   # 设置文件路径 </span><br><span class="line">   fn = os.path.basename(fileitem.filename)</span><br><span class="line">   open(&apos;/tmp/&apos; + fn, &apos;wb&apos;).write(fileitem.file.read())</span><br><span class="line"></span><br><span class="line">   message = &apos;文件 &quot;&apos; + fn + &apos;&quot; 上传成功&apos;</span><br><span class="line">   </span><br><span class="line">else:</span><br><span class="line">   message = &apos;文件没有上传&apos;</span><br><span class="line">   </span><br><span class="line">print &quot;&quot;&quot;\</span><br><span class="line">Content-Type: text/html\n</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   &lt;p&gt;%s&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&quot;&quot;&quot; % (message,)</span><br></pre></td></tr></table></figure></p>
<p>将以上代码保存到 save_file.py，并修改 save_file.py 权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 save_file.py</span><br></pre></td></tr></table></figure></p>
<p>如果你使用的系统是Unix/Linux，你必须替换文件分隔符，在window下只需要使用open()语句即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn = os.path.basename(fileitem.filename.replace(&quot;\\&quot;, &quot;/&quot; ))</span><br></pre></td></tr></table></figure></p>
<h2 id="文件下载对话框"><a href="#文件下载对话框" class="headerlink" title="文件下载对话框"></a>文件下载对话框</h2><p>我们先在当前目录下创建 foo.txt 文件，用于程序的下载。</p>
<p>文件下载通过设置HTTP头信息来实现，功能代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># HTTP 头部</span><br><span class="line">print &quot;Content-Disposition: attachment; filename=\&quot;foo.txt\&quot;&quot;;</span><br><span class="line">print</span><br><span class="line"># 打开文件</span><br><span class="line">fo = open(&quot;foo.txt&quot;, &quot;rb&quot;)</span><br><span class="line"></span><br><span class="line">str = fo.read();</span><br><span class="line">print str</span><br><span class="line"></span><br><span class="line"># 关闭文件</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-操作-MySQL-数据库"><a href="#Python-操作-MySQL-数据库" class="headerlink" title="Python 操作 MySQL 数据库"></a>Python 操作 MySQL 数据库</h1><h2 id="安装mysql-connector"><a href="#安装mysql-connector" class="headerlink" title="安装mysql-connector"></a>安装mysql-connector</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://cdn.mysql.com//Downloads/Connector-Python/mysql-connector-python-8.0.16-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh mysql-connector-python-8.0.16-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h2 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"></span><br><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line"># 打开数据库连接（请根据自己的用户名、密码及数据库名称进行修改）</span><br><span class="line">cnn = mysql.connector.connect(user=&apos;root&apos;,passwd=&apos;root&apos;,database=&apos;testdb&apos;)</span><br><span class="line"></span><br><span class="line"># 使用cursor()方法获取操作游标 </span><br><span class="line">cursor = cnn.cursor()</span><br><span class="line"></span><br><span class="line"># 使用execute方法执行SQL语句</span><br><span class="line">cursor.execute(&quot;SELECT VERSION()&quot;)</span><br><span class="line"></span><br><span class="line"># 使用 fetchone() 方法获取一条数据</span><br><span class="line">data = cursor.fetchone()</span><br><span class="line">print &quot;Database version : %s &quot; % data</span><br><span class="line"></span><br><span class="line"># 执行sql语句</span><br><span class="line">cnn.close()</span><br></pre></td></tr></table></figure>
<h2 id="连接mysql"><a href="#连接mysql" class="headerlink" title="连接mysql"></a>连接mysql</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(user=&apos;scott&apos;, password=&apos;password&apos;,</span><br><span class="line">                              host=&apos;127.0.0.1&apos;,</span><br><span class="line">                              database=&apos;employees&apos;)</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<p>对象连接<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from mysql.connector import (connection)</span><br><span class="line"></span><br><span class="line">cnx = connection.MySQLConnection(user=&apos;scott&apos;, password=&apos;password&apos;,</span><br><span class="line">                                 host=&apos;127.0.0.1&apos;,</span><br><span class="line">                                 database=&apos;employees&apos;)</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure></p>
<p>处理连接错误示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import mysql.connector</span><br><span class="line">from mysql.connector import errorcode</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">  cnx = mysql.connector.connect(user=&apos;scott&apos;,</span><br><span class="line">                                database=&apos;employ&apos;)</span><br><span class="line">except mysql.connector.Error as err:</span><br><span class="line">  if err.errno == errorcode.ER_ACCESS_DENIED_ERROR:</span><br><span class="line">    print(&quot;Something is wrong with your user name or password&quot;)</span><br><span class="line">  elif err.errno == errorcode.ER_BAD_DB_ERROR:</span><br><span class="line">    print(&quot;Database does not exist&quot;)</span><br><span class="line">  else:</span><br><span class="line">    print(err)</span><br><span class="line">else:</span><br><span class="line">  cnx.close()</span><br></pre></td></tr></table></figure></p>
<p>使用字典定义<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">  &apos;user&apos;: &apos;scott&apos;,</span><br><span class="line">  &apos;password&apos;: &apos;password&apos;,</span><br><span class="line">  &apos;host&apos;: &apos;127.0.0.1&apos;,</span><br><span class="line">  &apos;database&apos;: &apos;employees&apos;,</span><br><span class="line">  &apos;raise_on_warnings&apos;: True</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(**config)</span><br><span class="line"></span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure></p>
<h2 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">from __future__ import print_function</span><br><span class="line"></span><br><span class="line">import mysql.connector</span><br><span class="line">from mysql.connector import errorcode</span><br><span class="line"></span><br><span class="line">DB_NAME = &apos;employees&apos;</span><br><span class="line"></span><br><span class="line">TABLES = &#123;&#125;</span><br><span class="line">TABLES[&apos;employees&apos;] = (</span><br><span class="line">    &quot;CREATE TABLE `employees` (&quot;</span><br><span class="line">    &quot;  `emp_no` int(11) NOT NULL AUTO_INCREMENT,&quot;</span><br><span class="line">    &quot;  `birth_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  `first_name` varchar(14) NOT NULL,&quot;</span><br><span class="line">    &quot;  `last_name` varchar(16) NOT NULL,&quot;</span><br><span class="line">    &quot;  `gender` enum(&apos;M&apos;,&apos;F&apos;) NOT NULL,&quot;</span><br><span class="line">    &quot;  `hire_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`emp_no`)&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br><span class="line"></span><br><span class="line">TABLES[&apos;departments&apos;] = (</span><br><span class="line">    &quot;CREATE TABLE `departments` (&quot;</span><br><span class="line">    &quot;  `dept_no` char(4) NOT NULL,&quot;</span><br><span class="line">    &quot;  `dept_name` varchar(40) NOT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`dept_no`), UNIQUE KEY `dept_name` (`dept_name`)&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br><span class="line"></span><br><span class="line">TABLES[&apos;salaries&apos;] = (</span><br><span class="line">    &quot;CREATE TABLE `salaries` (&quot;</span><br><span class="line">    &quot;  `emp_no` int(11) NOT NULL,&quot;</span><br><span class="line">    &quot;  `salary` int(11) NOT NULL,&quot;</span><br><span class="line">    &quot;  `from_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  `to_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`emp_no`,`from_date`), KEY `emp_no` (`emp_no`),&quot;</span><br><span class="line">    &quot;  CONSTRAINT `salaries_ibfk_1` FOREIGN KEY (`emp_no`) &quot;</span><br><span class="line">    &quot;     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br><span class="line"></span><br><span class="line">TABLES[&apos;dept_emp&apos;] = (</span><br><span class="line">    &quot;CREATE TABLE `dept_emp` (&quot;</span><br><span class="line">    &quot;  `emp_no` int(11) NOT NULL,&quot;</span><br><span class="line">    &quot;  `dept_no` char(4) NOT NULL,&quot;</span><br><span class="line">    &quot;  `from_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  `to_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`emp_no`,`dept_no`), KEY `emp_no` (`emp_no`),&quot;</span><br><span class="line">    &quot;  KEY `dept_no` (`dept_no`),&quot;</span><br><span class="line">    &quot;  CONSTRAINT `dept_emp_ibfk_1` FOREIGN KEY (`emp_no`) &quot;</span><br><span class="line">    &quot;     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE,&quot;</span><br><span class="line">    &quot;  CONSTRAINT `dept_emp_ibfk_2` FOREIGN KEY (`dept_no`) &quot;</span><br><span class="line">    &quot;     REFERENCES `departments` (`dept_no`) ON DELETE CASCADE&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br><span class="line"></span><br><span class="line">TABLES[&apos;dept_manager&apos;] = (</span><br><span class="line">    &quot;  CREATE TABLE `dept_manager` (&quot;</span><br><span class="line">    &quot;  `dept_no` char(4) NOT NULL,&quot;</span><br><span class="line">    &quot;  `emp_no` int(11) NOT NULL,&quot;</span><br><span class="line">    &quot;  `from_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  `to_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`emp_no`,`dept_no`),&quot;</span><br><span class="line">    &quot;  KEY `emp_no` (`emp_no`),&quot;</span><br><span class="line">    &quot;  KEY `dept_no` (`dept_no`),&quot;</span><br><span class="line">    &quot;  CONSTRAINT `dept_manager_ibfk_1` FOREIGN KEY (`emp_no`) &quot;</span><br><span class="line">    &quot;     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE,&quot;</span><br><span class="line">    &quot;  CONSTRAINT `dept_manager_ibfk_2` FOREIGN KEY (`dept_no`) &quot;</span><br><span class="line">    &quot;     REFERENCES `departments` (`dept_no`) ON DELETE CASCADE&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br><span class="line"></span><br><span class="line">TABLES[&apos;titles&apos;] = (</span><br><span class="line">    &quot;CREATE TABLE `titles` (&quot;</span><br><span class="line">    &quot;  `emp_no` int(11) NOT NULL,&quot;</span><br><span class="line">    &quot;  `title` varchar(50) NOT NULL,&quot;</span><br><span class="line">    &quot;  `from_date` date NOT NULL,&quot;</span><br><span class="line">    &quot;  `to_date` date DEFAULT NULL,&quot;</span><br><span class="line">    &quot;  PRIMARY KEY (`emp_no`,`title`,`from_date`), KEY `emp_no` (`emp_no`),&quot;</span><br><span class="line">    &quot;  CONSTRAINT `titles_ibfk_1` FOREIGN KEY (`emp_no`)&quot;</span><br><span class="line">    &quot;     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE&quot;</span><br><span class="line">    &quot;) ENGINE=InnoDB&quot;)</span><br></pre></td></tr></table></figure>
<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">from __future__ import print_function</span><br><span class="line">from datetime import date, datetime, timedelta</span><br><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(user=&apos;scott&apos;, database=&apos;employees&apos;)</span><br><span class="line">cursor = cnx.cursor()</span><br><span class="line"></span><br><span class="line">tomorrow = datetime.now().date() + timedelta(days=1)</span><br><span class="line"></span><br><span class="line">add_employee = (&quot;INSERT INTO employees &quot;</span><br><span class="line">               &quot;(first_name, last_name, hire_date, gender, birth_date) &quot;</span><br><span class="line">               &quot;VALUES (%s, %s, %s, %s, %s)&quot;)</span><br><span class="line">add_salary = (&quot;INSERT INTO salaries &quot;</span><br><span class="line">              &quot;(emp_no, salary, from_date, to_date) &quot;</span><br><span class="line">              &quot;VALUES (%(emp_no)s, %(salary)s, %(from_date)s, %(to_date)s)&quot;)</span><br><span class="line"></span><br><span class="line">data_employee = (&apos;Geert&apos;, &apos;Vanderkelen&apos;, tomorrow, &apos;M&apos;, date(1977, 6, 14))</span><br><span class="line"></span><br><span class="line"># Insert new employee</span><br><span class="line">cursor.execute(add_employee, data_employee)</span><br><span class="line">emp_no = cursor.lastrowid</span><br><span class="line"></span><br><span class="line"># Insert salary information</span><br><span class="line">data_salary = &#123;</span><br><span class="line">  &apos;emp_no&apos;: emp_no,</span><br><span class="line">  &apos;salary&apos;: 50000,</span><br><span class="line">  &apos;from_date&apos;: tomorrow,</span><br><span class="line">  &apos;to_date&apos;: date(9999, 1, 1),</span><br><span class="line">&#125;</span><br><span class="line">cursor.execute(add_salary, data_salary)</span><br><span class="line"></span><br><span class="line"># Make sure data is committed to the database</span><br><span class="line">cnx.commit()</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(user=&apos;scott&apos;, database=&apos;employees&apos;)</span><br><span class="line">cursor = cnx.cursor()</span><br><span class="line"></span><br><span class="line">query = (&quot;SELECT first_name, last_name, hire_date FROM employees &quot;</span><br><span class="line">         &quot;WHERE hire_date BETWEEN %s AND %s&quot;)</span><br><span class="line"></span><br><span class="line">hire_start = datetime.date(1999, 1, 1)</span><br><span class="line">hire_end = datetime.date(1999, 12, 31)</span><br><span class="line"></span><br><span class="line">cursor.execute(query, (hire_start, hire_end))</span><br><span class="line"></span><br><span class="line">for (first_name, last_name, hire_date) in cursor:</span><br><span class="line">  print(&quot;&#123;&#125;, &#123;&#125; was hired on &#123;:%d %b %Y&#125;&quot;.format(</span><br><span class="line">    last_name, first_name, hire_date))</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<h2 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">from __future__ import print_function</span><br><span class="line"></span><br><span class="line">from decimal import Decimal</span><br><span class="line">from datetime import datetime, date, timedelta</span><br><span class="line"></span><br><span class="line">import mysql.connector</span><br><span class="line"></span><br><span class="line"># Connect with the MySQL Server</span><br><span class="line">cnx = mysql.connector.connect(user=&apos;scott&apos;, database=&apos;employees&apos;)</span><br><span class="line"></span><br><span class="line"># Get two buffered cursors</span><br><span class="line">curA = cnx.cursor(buffered=True)</span><br><span class="line">curB = cnx.cursor(buffered=True)</span><br><span class="line"></span><br><span class="line"># Query to get employees who joined in a period defined by two dates</span><br><span class="line">query = (</span><br><span class="line">  &quot;SELECT s.emp_no, salary, from_date, to_date FROM employees AS e &quot;</span><br><span class="line">  &quot;LEFT JOIN salaries AS s USING (emp_no) &quot;</span><br><span class="line">  &quot;WHERE to_date = DATE(&apos;9999-01-01&apos;)&quot;</span><br><span class="line">  &quot;AND e.hire_date BETWEEN DATE(%s) AND DATE(%s)&quot;)</span><br><span class="line"></span><br><span class="line"># UPDATE and INSERT statements for the old and new salary</span><br><span class="line">update_old_salary = (</span><br><span class="line">  &quot;UPDATE salaries SET to_date = %s &quot;</span><br><span class="line">  &quot;WHERE emp_no = %s AND from_date = %s&quot;)</span><br><span class="line">insert_new_salary = (</span><br><span class="line">  &quot;INSERT INTO salaries (emp_no, from_date, to_date, salary) &quot;</span><br><span class="line">  &quot;VALUES (%s, %s, %s, %s)&quot;)</span><br><span class="line"></span><br><span class="line"># Select the employees getting a raise</span><br><span class="line">curA.execute(query, (date(2000, 1, 1), date(2000, 12, 31)))</span><br><span class="line"></span><br><span class="line"># Iterate through the result of curA</span><br><span class="line">for (emp_no, salary, from_date, to_date) in curA:</span><br><span class="line"></span><br><span class="line">  # Update the old and insert the new salary</span><br><span class="line">  new_salary = int(round(salary * Decimal(&apos;1.15&apos;)))</span><br><span class="line">  curB.execute(update_old_salary, (tomorrow, emp_no, from_date))</span><br><span class="line">  curB.execute(insert_new_salary,</span><br><span class="line">               (emp_no, tomorrow, date(9999, 1, 1,), new_salary))</span><br><span class="line"></span><br><span class="line">  # Commit the changes</span><br><span class="line">  cnx.commit()</span><br><span class="line"></span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<h1 id="Python-网络编程"><a href="#Python-网络编程" class="headerlink" title="Python 网络编程"></a>Python 网络编程</h1><h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><p>我们使用 socket 模块的 socket 函数来创建一个 socket 对象。socket 对象可以通过调用其他函数来设置一个 socket 服务。</p>
<p>现在我们可以通过调用 bind(hostname, port) 函数来指定服务的 port(端口)。</p>
<p>接着，我们调用 socket 对象的 accept 方法。该方法等待客户端的连接，并返回 connection 对象，表示已连接到客户端。</p>
<p>完整代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"># 文件名：server.py</span><br><span class="line"> </span><br><span class="line">import socket               # 导入 socket 模块</span><br><span class="line"> </span><br><span class="line">s = socket.socket()         # 创建 socket 对象</span><br><span class="line">host = socket.gethostname() # 获取本地主机名</span><br><span class="line">port = 12345                # 设置端口</span><br><span class="line">s.bind((host, port))        # 绑定端口</span><br><span class="line"> </span><br><span class="line">s.listen(5)                 # 等待客户端连接</span><br><span class="line">while True:</span><br><span class="line">    c,addr = s.accept()     # 建立客户端连接</span><br><span class="line">    print &apos;连接地址：&apos;, addr</span><br><span class="line">    c.send(&apos;欢迎访问菜鸟教程！&apos;)</span><br><span class="line">    c.close()                # 关闭连接</span><br></pre></td></tr></table></figure></p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>接下来我们写一个简单的客户端实例连接到以上创建的服务。端口号为 12345。</p>
<p>socket.connect(hosname, port ) 方法打开一个 TCP 连接到主机为 hostname 端口为 port 的服务商。连接后我们就可以从服务端获取数据，记住，操作完成后需要关闭连接。</p>
<p>完整代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"># 文件名：client.py</span><br><span class="line"> </span><br><span class="line">import socket               # 导入 socket 模块</span><br><span class="line"> </span><br><span class="line">s = socket.socket()         # 创建 socket 对象</span><br><span class="line">host = socket.gethostname() # 获取本地主机名</span><br><span class="line">port = 12345                # 设置端口号</span><br><span class="line"> </span><br><span class="line">s.connect((host, port))</span><br><span class="line">print s.recv(1024)</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></p>
<p>第一个终端执行 server.py 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python server.py</span><br></pre></td></tr></table></figure></p>
<p>第二个终端执行 client.py 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python client.py</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-SMTP发送邮件"><a href="#Python-SMTP发送邮件" class="headerlink" title="Python SMTP发送邮件"></a>Python SMTP发送邮件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line"> </span><br><span class="line">sender = &apos;from@runoob.com&apos;</span><br><span class="line">receivers = [&apos;429240967@qq.com&apos;]  # 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span><br><span class="line"> </span><br><span class="line"># 三个参数：第一个为文本内容，第二个 plain 设置文本格式，第三个 utf-8 设置编码</span><br><span class="line">message = MIMEText(&apos;Python 邮件发送测试...&apos;, &apos;plain&apos;, &apos;utf-8&apos;)</span><br><span class="line">message[&apos;From&apos;] = Header(&quot;菜鸟教程&quot;, &apos;utf-8&apos;)   # 发送者</span><br><span class="line">message[&apos;To&apos;] =  Header(&quot;测试&quot;, &apos;utf-8&apos;)        # 接收者</span><br><span class="line"> </span><br><span class="line">subject = &apos;Python SMTP 邮件测试&apos;</span><br><span class="line">message[&apos;Subject&apos;] = Header(subject, &apos;utf-8&apos;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">try:</span><br><span class="line">    smtpObj = smtplib.SMTP(&apos;localhost&apos;)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    print &quot;邮件发送成功&quot;</span><br><span class="line">except smtplib.SMTPException:</span><br><span class="line">    print &quot;Error: 无法发送邮件&quot;</span><br></pre></td></tr></table></figure>
<h2 id="发一封邮件"><a href="#发一封邮件" class="headerlink" title="发一封邮件"></a>发一封邮件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">#coding=utf-8</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line">from smtplib import SMTP_SSL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#邮箱smtp服务器</span><br><span class="line">host_server = &apos;smtp.sina.com&apos;</span><br><span class="line">#sender为发件人的登录名</span><br><span class="line">sender = &apos;sylucky2004@sina.com&apos;</span><br><span class="line">#pwd为邮箱的授权码</span><br><span class="line">pwd = &apos;**ve**&apos;</span><br><span class="line">#发件人的邮箱</span><br><span class="line">sender_mail = &apos;sylucky2004@sina.com&apos;</span><br><span class="line">#收件人邮箱</span><br><span class="line">receiver = &apos;231876009@qq.com&apos;</span><br><span class="line">#邮件的正文内容</span><br><span class="line">mail_content = &apos;你好，这是使用python登录邮箱发邮件的测试&apos;</span><br><span class="line">#邮件标题</span><br><span class="line">mail_title = &apos;Maxsu的邮件&apos;</span><br><span class="line"></span><br><span class="line">#ssl登录</span><br><span class="line">smtp = SMTP_SSL(host_server)</span><br><span class="line">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span><br><span class="line">smtp.set_debuglevel(1)</span><br><span class="line">smtp.ehlo(host_server)</span><br><span class="line">smtp.login(sender, pwd)</span><br><span class="line"></span><br><span class="line">msg = MIMEText(mail_content, &quot;plain&quot;, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;Subject&quot;] = Header(mail_title, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;From&quot;] = sender_mail</span><br><span class="line">msg[&quot;To&quot;] = receiver</span><br><span class="line">smtp.sendmail(sender_mail, receiver, msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure>
<h2 id="给多人发邮件"><a href="#给多人发邮件" class="headerlink" title="给多人发邮件"></a>给多人发邮件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">#coding=utf-8</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line">from smtplib import SMTP_SSL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#qq邮箱smtp服务器</span><br><span class="line">host_server = &apos;smtp.qq.com&apos;</span><br><span class="line">#sender_qq为发件人的qq号码</span><br><span class="line">sender_qq = &apos;7697****@qq.com&apos;</span><br><span class="line">#pwd为qq邮箱的授权码</span><br><span class="line">pwd = &apos;h**********bdc&apos; ## h**********bdc</span><br><span class="line">#发件人的邮箱</span><br><span class="line">sender_qq_mail = &apos;7697****@qq.com&apos;</span><br><span class="line">#收件人邮箱</span><br><span class="line">receivers = [&apos;yiibai.com@gmail.com&apos;,&apos;****su@gmail.com&apos;]</span><br><span class="line"></span><br><span class="line">#邮件的正文内容</span><br><span class="line">mail_content = &apos;你好，这是使用python登录qq邮箱发邮件的测试&apos;</span><br><span class="line">#邮件标题</span><br><span class="line">mail_title = &apos;Maxsu的邮件&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ssl登录</span><br><span class="line">smtp = SMTP_SSL(host_server)</span><br><span class="line">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span><br><span class="line">smtp.set_debuglevel(1)</span><br><span class="line">smtp.ehlo(host_server)</span><br><span class="line">smtp.login(sender_qq, pwd)</span><br><span class="line"></span><br><span class="line">msg = MIMEText(mail_content, &quot;plain&quot;, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;Subject&quot;] = Header(mail_title, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;From&quot;] = sender_qq_mail</span><br><span class="line">msg[&quot;To&quot;] = Header(&quot;接收者测试&quot;, &apos;utf-8&apos;) ## 接收者的别名</span><br><span class="line">smtp.sendmail(sender_qq_mail, receivers, msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure>
<h2 id="使用Python的发送HTML格式的邮件"><a href="#使用Python的发送HTML格式的邮件" class="headerlink" title="使用Python的发送HTML格式的邮件"></a>使用Python的发送HTML格式的邮件</h2><p>Python中发送HTML格式的邮件与发送纯文本消息的邮件不同之处就是将MimeText用于中_subtype设置为html代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">#coding=utf-8</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line">from smtplib import SMTP_SSL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#qq邮箱smtp服务器</span><br><span class="line">host_server = &apos;smtp.qq.com&apos;</span><br><span class="line">#sender_qq为发件人的qq号码</span><br><span class="line">sender_qq = &apos;7697****@qq.com&apos;</span><br><span class="line">#pwd为qq邮箱的授权码</span><br><span class="line">pwd = &apos;***bmke********&apos; ##</span><br><span class="line">#发件人的邮箱</span><br><span class="line">sender_qq_mail = &apos;7697****@qq.com&apos;</span><br><span class="line">#收件人邮箱</span><br><span class="line">receiver = &apos;yiibai.com@gmail.com&apos;</span><br><span class="line"></span><br><span class="line">#邮件的正文内容</span><br><span class="line">mail_content = &quot;你好，&lt;p&gt;这是使用python登录qq邮箱发送HTML格式邮件的测试：&lt;/p&gt;&lt;p&gt;&lt;a href=&apos;http://www.yiibai.com&apos;&gt;易百教程&lt;/a&gt;&lt;/p&gt;&quot;</span><br><span class="line">#邮件标题</span><br><span class="line">mail_title = &apos;Maxsu的邮件&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ssl登录</span><br><span class="line">smtp = SMTP_SSL(host_server)</span><br><span class="line">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span><br><span class="line">smtp.set_debuglevel(1)</span><br><span class="line">smtp.ehlo(host_server)</span><br><span class="line">smtp.login(sender_qq, pwd)</span><br><span class="line"></span><br><span class="line">msg = MIMEText(mail_content, &quot;html&quot;, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;Subject&quot;] = Header(mail_title, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;From&quot;] = sender_qq_mail</span><br><span class="line">msg[&quot;To&quot;] = Header(&quot;接收者测试&quot;, &apos;utf-8&apos;) ## 接收者的别名</span><br><span class="line"></span><br><span class="line">smtp.sendmail(sender_qq_mail, receiver, msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure></p>
<h2 id="Python发送带附件的邮件"><a href="#Python发送带附件的邮件" class="headerlink" title="Python发送带附件的邮件"></a>Python发送带附件的邮件</h2><p>要发送带附件的邮件，要首先创建³³ MIMEMultipart()实例，然后构造附件，如果有多个附件，可依次构造，使用求最后smtplib.smtp发送</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">#coding=utf-8</span><br><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line">from smtplib import SMTP_SSL</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.mime.multipart import MIMEMultipart</span><br><span class="line">from email.header import Header</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#qq邮箱smtp服务器</span><br><span class="line">host_server = &apos;smtp.qq.com&apos;</span><br><span class="line">#sender_qq为发件人的qq号码</span><br><span class="line">sender_qq = &apos;7697****@qq.com&apos;</span><br><span class="line">#pwd为qq邮箱的授权码</span><br><span class="line">pwd = &apos;*****mkenb****&apos; ##</span><br><span class="line">#发件人的邮箱</span><br><span class="line">sender_qq_mail = &apos;7697****@qq.com&apos;</span><br><span class="line">#收件人邮箱</span><br><span class="line">receiver = &apos;yiibai.com@gmail.com&apos;</span><br><span class="line"></span><br><span class="line">#邮件的正文内容</span><br><span class="line">mail_content = &quot;你好，&lt;p&gt;这是使用python登录qq邮箱发送HTML格式邮件的测试：&lt;/p&gt;&lt;p&gt;&lt;a href=&apos;http://www.yiibai.com&apos;&gt;易百教程&lt;/a&gt;&lt;/p&gt;&quot;</span><br><span class="line">#邮件标题</span><br><span class="line">mail_title = &apos;Maxsu的邮件&apos;</span><br><span class="line"></span><br><span class="line">#邮件正文内容</span><br><span class="line">msg = MIMEMultipart()</span><br><span class="line">#msg = MIMEText(mail_content, &quot;plain&quot;, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;Subject&quot;] = Header(mail_title, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;From&quot;] = sender_qq_mail</span><br><span class="line">msg[&quot;To&quot;] = Header(&quot;接收者测试&quot;, &apos;utf-8&apos;) ## 接收者的别名</span><br><span class="line"></span><br><span class="line">#邮件正文内容</span><br><span class="line">msg.attach(MIMEText(mail_content, &apos;html&apos;, &apos;utf-8&apos;))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"># 构造附件1，传送当前目录下的 test.txt 文件</span><br><span class="line">att1 = MIMEText(open(&apos;attach.txt&apos;, &apos;rb&apos;).read(), &apos;base64&apos;, &apos;utf-8&apos;)</span><br><span class="line">att1[&quot;Content-Type&quot;] = &apos;application/octet-stream&apos;</span><br><span class="line"># 这里的filename可以任意写，写什么名字，邮件中显示什么名字</span><br><span class="line">att1[&quot;Content-Disposition&quot;] = &apos;attachment; filename=&quot;attach.txt&quot;&apos;</span><br><span class="line">msg.attach(att1)</span><br><span class="line"> </span><br><span class="line"># 构造附件2，传送当前目录下的 runoob.txt 文件</span><br><span class="line">att2 = MIMEText(open(&apos;yiibai.txt&apos;, &apos;rb&apos;).read(), &apos;base64&apos;, &apos;utf-8&apos;)</span><br><span class="line">att2[&quot;Content-Type&quot;] = &apos;application/octet-stream&apos;</span><br><span class="line">att2[&quot;Content-Disposition&quot;] = &apos;attachment; filename=&quot;yiibai.txt&quot;&apos;</span><br><span class="line">msg.attach(att2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ssl登录</span><br><span class="line">smtp = SMTP_SSL(host_server)</span><br><span class="line">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span><br><span class="line">smtp.set_debuglevel(1)</span><br><span class="line">smtp.ehlo(host_server)</span><br><span class="line">smtp.login(sender_qq, pwd)</span><br><span class="line"></span><br><span class="line">smtp.sendmail(sender_qq_mail, receiver, msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure>
<h2 id="在HTML文本中添加图片"><a href="#在HTML文本中添加图片" class="headerlink" title="在HTML文本中添加图片"></a>在HTML文本中添加图片</h2><p>邮件的HTML文本中一般邮件服务商添加外链是无效的，所以要发送带图片的邮件内容，可以参考下面的实例代码实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env python</span><br><span class="line">#coding=utf-8</span><br><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line">from smtplib import SMTP_SSL</span><br><span class="line"></span><br><span class="line">from email.mime.image import MIMEImage</span><br><span class="line">from email.mime.multipart import MIMEMultipart</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#qq邮箱smtp服务器</span><br><span class="line">host_server = &apos;smtp.qq.com&apos;</span><br><span class="line">#sender_qq为发件人的qq号码</span><br><span class="line">sender_qq = &apos;7697****3@qq.com&apos;</span><br><span class="line">#pwd为qq邮箱的授权码</span><br><span class="line">pwd = &apos;h******mk*****&apos; #</span><br><span class="line">#发件人的邮箱</span><br><span class="line">sender_qq_mail = &apos;7697****3@qq.com&apos;</span><br><span class="line">#收件人邮箱</span><br><span class="line">receiver = [&apos;yiibai.com@gmail.com&apos;,&apos;h****u@qq.com&apos;]</span><br><span class="line"></span><br><span class="line">#邮件的正文内容</span><br><span class="line">mail_content = &quot;&quot;</span><br><span class="line">#邮件标题</span><br><span class="line">mail_title = &apos;Maxsu的邮件&apos;</span><br><span class="line"></span><br><span class="line">#邮件正文内容</span><br><span class="line">#msg = MIMEMultipart()</span><br><span class="line">msg = MIMEMultipart(&apos;related&apos;)</span><br><span class="line">msg[&quot;Subject&quot;] = Header(mail_title, &apos;utf-8&apos;)</span><br><span class="line">msg[&quot;From&quot;] = sender_qq_mail</span><br><span class="line">msg[&quot;To&quot;] = Header(&quot;接收者测试&quot;, &apos;utf-8&apos;) ## 接收者的别名</span><br><span class="line"></span><br><span class="line">msgAlternative = MIMEMultipart(&apos;alternative&apos;)</span><br><span class="line">msg.attach(msgAlternative)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#邮件正文内容</span><br><span class="line">mail_body = &quot;&quot;&quot;</span><br><span class="line"> &lt;p&gt;你好，Python 邮件发送测试...&lt;/p&gt;</span><br><span class="line"> &lt;p&gt;这是使用python登录qq邮箱发送HTML格式和图片的测试邮件：&lt;/p&gt;</span><br><span class="line"> &lt;p&gt;&lt;a href=&apos;http://www.yiibai.com&apos;&gt;易百教程&lt;/a&gt;&lt;/p&gt;</span><br><span class="line"> &lt;p&gt;图片演示：&lt;/p&gt;</span><br><span class="line"> &lt;p&gt;![](cid:send_image)&lt;/p&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">#msg.attach(MIMEText(mail_body, &apos;html&apos;, &apos;utf-8&apos;))</span><br><span class="line">msgText = (MIMEText(mail_body, &apos;html&apos;, &apos;utf-8&apos;))</span><br><span class="line">msgAlternative.attach(msgText)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"># 指定图片为当前目录</span><br><span class="line">fp = open(&apos;my.png&apos;, &apos;rb&apos;)</span><br><span class="line">msgImage = MIMEImage(fp.read())</span><br><span class="line">fp.close()</span><br><span class="line"> </span><br><span class="line"># 定义图片 ID，在 HTML 文本中引用</span><br><span class="line">msgImage.add_header(&apos;Content-ID&apos;, &apos;&lt;send_image&gt;&apos;)</span><br><span class="line">msg.attach(msgImage)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ssl登录</span><br><span class="line">smtp = SMTP_SSL(host_server)</span><br><span class="line">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span><br><span class="line">smtp.set_debuglevel(1)</span><br><span class="line">smtp.ehlo(host_server)</span><br><span class="line">smtp.login(sender_qq, pwd)</span><br><span class="line"></span><br><span class="line">smtp.sendmail(sender_qq_mail, receiver, msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure>
<h2 id="QQ-SMTP"><a href="#QQ-SMTP" class="headerlink" title="QQ SMTP"></a>QQ SMTP</h2><p>先通过邮箱设置-&gt;账户-&gt;生成授权码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.utils import formataddr</span><br><span class="line"> </span><br><span class="line">my_sender=&apos;429240967@qq.com&apos;    # 发件人邮箱账号</span><br><span class="line">my_pass = &apos;xxxxxxxxxx&apos;              # 发件人邮箱密码</span><br><span class="line">my_user=&apos;429240967@qq.com&apos;      # 收件人邮箱账号，我这边发送给自己</span><br><span class="line">def mail():</span><br><span class="line">    ret=True</span><br><span class="line">    try:</span><br><span class="line">        msg=MIMEText(&apos;填写邮件内容&apos;,&apos;plain&apos;,&apos;utf-8&apos;)</span><br><span class="line">        msg[&apos;From&apos;]=formataddr([&quot;FromRunoob&quot;,my_sender])  # 括号里的对应发件人邮箱昵称、发件人邮箱账号</span><br><span class="line">        msg[&apos;To&apos;]=formataddr([&quot;FK&quot;,my_user])              # 括号里的对应收件人邮箱昵称、收件人邮箱账号</span><br><span class="line">        msg[&apos;Subject&apos;]=&quot;菜鸟教程发送邮件测试&quot;                # 邮件的主题，也可以说是标题</span><br><span class="line"> </span><br><span class="line">        server=smtplib.SMTP_SSL(&quot;smtp.qq.com&quot;, 465)  # 发件人邮箱中的SMTP服务器，端口是25</span><br><span class="line">        server.login(my_sender, my_pass)  # 括号中对应的是发件人邮箱账号、邮箱密码</span><br><span class="line">        server.sendmail(my_sender,[my_user,],msg.as_string())  # 括号中对应的是发件人邮箱账号、收件人邮箱账号、发送邮件</span><br><span class="line">        server.quit()  # 关闭连接</span><br><span class="line">    except Exception:  # 如果 try 中的语句没有执行，则会执行下面的 ret=False</span><br><span class="line">        ret=False</span><br><span class="line">    return ret</span><br><span class="line"> </span><br><span class="line">ret=mail()</span><br><span class="line">if ret:</span><br><span class="line">    print(&quot;邮件发送成功&quot;)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;邮件发送失败&quot;)</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-多线程"><a href="#Python-多线程" class="headerlink" title="Python 多线程"></a>Python 多线程</h1><p>多线程类似于同时执行多个不同程序，多线程运行有如下优点：</p>
<ul>
<li>使用线程可以把占据长时间的程序中的任务放到后台去处理。</li>
<li>用户界面可以更加吸引人，这样比如用户点击了一个按钮去触发某些事件的处理，可以弹出一个进度条来显示处理的进度</li>
<li>程序的运行速度可能加快</li>
<li>在一些等待的任务实现上如用户输入、文件读写和网络收发数据等，线程就比较有用了。在这种情况下我们可以释放一些珍贵的资源如内存占用等等。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import thread</span><br><span class="line">import time</span><br><span class="line"> </span><br><span class="line"># 为线程定义一个函数</span><br><span class="line">def print_time( threadName, delay):</span><br><span class="line">   count = 0</span><br><span class="line">   while count &lt; 5:</span><br><span class="line">      time.sleep(delay)</span><br><span class="line">      count += 1</span><br><span class="line">      print &quot;%s: %s&quot; % ( threadName, time.ctime(time.time()) )</span><br><span class="line"> </span><br><span class="line"># 创建两个线程</span><br><span class="line">try:</span><br><span class="line">   thread.start_new_thread( print_time, (&quot;Thread-1&quot;, 2, ) )</span><br><span class="line">   thread.start_new_thread( print_time, (&quot;Thread-2&quot;, 4, ) )</span><br><span class="line">except:</span><br><span class="line">   print &quot;Error: unable to start thread&quot;</span><br><span class="line"> </span><br><span class="line">while 1:</span><br><span class="line">   pass</span><br></pre></td></tr></table></figure>
<h2 id="使用Threading模块创建线程"><a href="#使用Threading模块创建线程" class="headerlink" title="使用Threading模块创建线程"></a>使用Threading模块创建线程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"> </span><br><span class="line">exitFlag = 0</span><br><span class="line"> </span><br><span class="line">class myThread (threading.Thread):   #继承父类threading.Thread</span><br><span class="line">    def __init__(self, threadID, name, counter):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.threadID = threadID</span><br><span class="line">        self.name = name</span><br><span class="line">        self.counter = counter</span><br><span class="line">    def run(self):                   #把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 </span><br><span class="line">        print &quot;Starting &quot; + self.name</span><br><span class="line">        print_time(self.name, self.counter, 5)</span><br><span class="line">        print &quot;Exiting &quot; + self.name</span><br><span class="line"> </span><br><span class="line">def print_time(threadName, delay, counter):</span><br><span class="line">    while counter:</span><br><span class="line">        if exitFlag:</span><br><span class="line">            (threading.Thread).exit()</span><br><span class="line">        time.sleep(delay)</span><br><span class="line">        print &quot;%s: %s&quot; % (threadName, time.ctime(time.time()))</span><br><span class="line">        counter -= 1</span><br><span class="line"> </span><br><span class="line"># 创建新线程</span><br><span class="line">thread1 = myThread(1, &quot;Thread-1&quot;, 1)</span><br><span class="line">thread2 = myThread(2, &quot;Thread-2&quot;, 2)</span><br><span class="line"> </span><br><span class="line"># 开启线程</span><br><span class="line">thread1.start()</span><br><span class="line">thread2.start()</span><br><span class="line"> </span><br><span class="line">print &quot;Exiting Main Thread&quot;</span><br></pre></td></tr></table></figure>
<h2 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h2><p>如果多个线程共同对某个数据修改，则可能出现不可预料的结果，为了保证数据的正确性，需要对多个线程进行同步。</p>
<p>使用Thread对象的Lock和Rlock可以实现简单的线程同步，这两个对象都有acquire方法和release方法，对于那些需要每次只允许一个线程操作的数据，可以将其操作放到acquire和release方法之间。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"> </span><br><span class="line">class myThread (threading.Thread):</span><br><span class="line">    def __init__(self, threadID, name, counter):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.threadID = threadID</span><br><span class="line">        self.name = name</span><br><span class="line">        self.counter = counter</span><br><span class="line">    def run(self):</span><br><span class="line">        print &quot;Starting &quot; + self.name</span><br><span class="line">       # 获得锁，成功获得锁定后返回True</span><br><span class="line">       # 可选的timeout参数不填时将一直阻塞直到获得锁定</span><br><span class="line">       # 否则超时后将返回False</span><br><span class="line">        threadLock.acquire()</span><br><span class="line">        print_time(self.name, self.counter, 3)</span><br><span class="line">        # 释放锁</span><br><span class="line">        threadLock.release()</span><br><span class="line"> </span><br><span class="line">def print_time(threadName, delay, counter):</span><br><span class="line">    while counter:</span><br><span class="line">        time.sleep(delay)</span><br><span class="line">        print &quot;%s: %s&quot; % (threadName, time.ctime(time.time()))</span><br><span class="line">        counter -= 1</span><br><span class="line"> </span><br><span class="line">threadLock = threading.Lock()</span><br><span class="line">threads = []</span><br><span class="line"> </span><br><span class="line"># 创建新线程</span><br><span class="line">thread1 = myThread(1, &quot;Thread-1&quot;, 1)</span><br><span class="line">thread2 = myThread(2, &quot;Thread-2&quot;, 2)</span><br><span class="line"> </span><br><span class="line"># 开启新线程</span><br><span class="line">thread1.start()</span><br><span class="line">thread2.start()</span><br><span class="line"> </span><br><span class="line"># 添加线程到线程列表</span><br><span class="line">threads.append(thread1)</span><br><span class="line">threads.append(thread2)</span><br><span class="line"> </span><br><span class="line"># 等待所有线程完成</span><br><span class="line">for t in threads:</span><br><span class="line">    t.join()</span><br><span class="line">print &quot;Exiting Main Thread&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="线程优先级队列（-Queue）"><a href="#线程优先级队列（-Queue）" class="headerlink" title="线程优先级队列（ Queue）"></a>线程优先级队列（ Queue）</h2><p>Python的Queue模块中提供了同步的、线程安全的队列类，包括FIFO（先入先出)队列Queue，LIFO（后入先出）队列LifoQueue，和优先级队列PriorityQueue。这些队列都实现了锁原语，能够在多线程中直接使用。可以使用队列来实现线程间的同步。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import Queue</span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"> </span><br><span class="line">exitFlag = 0</span><br><span class="line"> </span><br><span class="line">class myThread (threading.Thread):</span><br><span class="line">    def __init__(self, threadID, name, q):</span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.threadID = threadID</span><br><span class="line">        self.name = name</span><br><span class="line">        self.q = q</span><br><span class="line">    def run(self):</span><br><span class="line">        print &quot;Starting &quot; + self.name</span><br><span class="line">        process_data(self.name, self.q)</span><br><span class="line">        print &quot;Exiting &quot; + self.name</span><br><span class="line"> </span><br><span class="line">def process_data(threadName, q):</span><br><span class="line">    while not exitFlag:</span><br><span class="line">        queueLock.acquire()</span><br><span class="line">        if not workQueue.empty():</span><br><span class="line">            data = q.get()</span><br><span class="line">            queueLock.release()</span><br><span class="line">            print &quot;%s processing %s&quot; % (threadName, data)</span><br><span class="line">        else:</span><br><span class="line">            queueLock.release()</span><br><span class="line">        time.sleep(1)</span><br><span class="line"> </span><br><span class="line">threadList = [&quot;Thread-1&quot;, &quot;Thread-2&quot;, &quot;Thread-3&quot;]</span><br><span class="line">nameList = [&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;]</span><br><span class="line">queueLock = threading.Lock()</span><br><span class="line">workQueue = Queue.Queue(10)</span><br><span class="line">threads = []</span><br><span class="line">threadID = 1</span><br><span class="line"> </span><br><span class="line"># 创建新线程</span><br><span class="line">for tName in threadList:</span><br><span class="line">    thread = myThread(threadID, tName, workQueue)</span><br><span class="line">    thread.start()</span><br><span class="line">    threads.append(thread)</span><br><span class="line">    threadID += 1</span><br><span class="line"> </span><br><span class="line"># 填充队列</span><br><span class="line">queueLock.acquire()</span><br><span class="line">for word in nameList:</span><br><span class="line">    workQueue.put(word)</span><br><span class="line">queueLock.release()</span><br><span class="line"> </span><br><span class="line"># 等待队列清空</span><br><span class="line">while not workQueue.empty():</span><br><span class="line">    pass</span><br><span class="line"> </span><br><span class="line"># 通知线程是时候退出</span><br><span class="line">exitFlag = 1</span><br><span class="line"> </span><br><span class="line"># 等待所有线程完成</span><br><span class="line">for t in threads:</span><br><span class="line">    t.join()</span><br><span class="line">print &quot;Exiting Main Thread&quot;</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-XML解析"><a href="#Python-XML解析" class="headerlink" title="Python XML解析"></a>Python XML解析</h1><p>Python有三种方法解析XML，SAX，DOM，以及ElementTree：</p>
<p>movies.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;collection shelf=&quot;New Arrivals&quot;&gt;</span><br><span class="line">&lt;movie title=&quot;Enemy Behind&quot;&gt;</span><br><span class="line">   &lt;type&gt;War, Thriller&lt;/type&gt;</span><br><span class="line">   &lt;format&gt;DVD&lt;/format&gt;</span><br><span class="line">   &lt;year&gt;2003&lt;/year&gt;</span><br><span class="line">   &lt;rating&gt;PG&lt;/rating&gt;</span><br><span class="line">   &lt;stars&gt;10&lt;/stars&gt;</span><br><span class="line">   &lt;description&gt;Talk about a US-Japan war&lt;/description&gt;</span><br><span class="line">&lt;/movie&gt;</span><br><span class="line">&lt;movie title=&quot;Transformers&quot;&gt;</span><br><span class="line">   &lt;type&gt;Anime, Science Fiction&lt;/type&gt;</span><br><span class="line">   &lt;format&gt;DVD&lt;/format&gt;</span><br><span class="line">   &lt;year&gt;1989&lt;/year&gt;</span><br><span class="line">   &lt;rating&gt;R&lt;/rating&gt;</span><br><span class="line">   &lt;stars&gt;8&lt;/stars&gt;</span><br><span class="line">   &lt;description&gt;A schientific fiction&lt;/description&gt;</span><br><span class="line">&lt;/movie&gt;</span><br><span class="line">   &lt;movie title=&quot;Trigun&quot;&gt;</span><br><span class="line">   &lt;type&gt;Anime, Action&lt;/type&gt;</span><br><span class="line">   &lt;format&gt;DVD&lt;/format&gt;</span><br><span class="line">   &lt;episodes&gt;4&lt;/episodes&gt;</span><br><span class="line">   &lt;rating&gt;PG&lt;/rating&gt;</span><br><span class="line">   &lt;stars&gt;10&lt;/stars&gt;</span><br><span class="line">   &lt;description&gt;Vash the Stampede!&lt;/description&gt;</span><br><span class="line">&lt;/movie&gt;</span><br><span class="line">&lt;movie title=&quot;Ishtar&quot;&gt;</span><br><span class="line">   &lt;type&gt;Comedy&lt;/type&gt;</span><br><span class="line">   &lt;format&gt;VHS&lt;/format&gt;</span><br><span class="line">   &lt;rating&gt;PG&lt;/rating&gt;</span><br><span class="line">   &lt;stars&gt;2&lt;/stars&gt;</span><br><span class="line">   &lt;description&gt;Viewable boredom&lt;/description&gt;</span><br><span class="line">&lt;/movie&gt;</span><br><span class="line">&lt;/collection&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="SAX（XML的简单API）"><a href="#SAX（XML的简单API）" class="headerlink" title="SAX（XML的简单API）"></a>SAX（XML的简单API）</h2><p>Python标准库包含SAX解析器，SAX用事件驱动模型，通过在解析XML的过程中触发一个个的事件并调用用户定义的回调函数来处理XML文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">import xml.sax</span><br><span class="line"> </span><br><span class="line">class MovieHandler( xml.sax.ContentHandler ):</span><br><span class="line">   def __init__(self):</span><br><span class="line">      self.CurrentData = &quot;&quot;</span><br><span class="line">      self.type = &quot;&quot;</span><br><span class="line">      self.format = &quot;&quot;</span><br><span class="line">      self.year = &quot;&quot;</span><br><span class="line">      self.rating = &quot;&quot;</span><br><span class="line">      self.stars = &quot;&quot;</span><br><span class="line">      self.description = &quot;&quot;</span><br><span class="line"> </span><br><span class="line">   # 元素开始事件处理</span><br><span class="line">   def startElement(self, tag, attributes):</span><br><span class="line">      self.CurrentData = tag</span><br><span class="line">      if tag == &quot;movie&quot;:</span><br><span class="line">         print &quot;*****Movie*****&quot;</span><br><span class="line">         title = attributes[&quot;title&quot;]</span><br><span class="line">         print &quot;Title:&quot;, title</span><br><span class="line"> </span><br><span class="line">   # 元素结束事件处理</span><br><span class="line">   def endElement(self, tag):</span><br><span class="line">      if self.CurrentData == &quot;type&quot;:</span><br><span class="line">         print &quot;Type:&quot;, self.type</span><br><span class="line">      elif self.CurrentData == &quot;format&quot;:</span><br><span class="line">         print &quot;Format:&quot;, self.format</span><br><span class="line">      elif self.CurrentData == &quot;year&quot;:</span><br><span class="line">         print &quot;Year:&quot;, self.year</span><br><span class="line">      elif self.CurrentData == &quot;rating&quot;:</span><br><span class="line">         print &quot;Rating:&quot;, self.rating</span><br><span class="line">      elif self.CurrentData == &quot;stars&quot;:</span><br><span class="line">         print &quot;Stars:&quot;, self.stars</span><br><span class="line">      elif self.CurrentData == &quot;description&quot;:</span><br><span class="line">         print &quot;Description:&quot;, self.description</span><br><span class="line">      self.CurrentData = &quot;&quot;</span><br><span class="line"> </span><br><span class="line">   # 内容事件处理</span><br><span class="line">   def characters(self, content):</span><br><span class="line">      if self.CurrentData == &quot;type&quot;:</span><br><span class="line">         self.type = content</span><br><span class="line">      elif self.CurrentData == &quot;format&quot;:</span><br><span class="line">         self.format = content</span><br><span class="line">      elif self.CurrentData == &quot;year&quot;:</span><br><span class="line">         self.year = content</span><br><span class="line">      elif self.CurrentData == &quot;rating&quot;:</span><br><span class="line">         self.rating = content</span><br><span class="line">      elif self.CurrentData == &quot;stars&quot;:</span><br><span class="line">         self.stars = content</span><br><span class="line">      elif self.CurrentData == &quot;description&quot;:</span><br><span class="line">         self.description = content</span><br><span class="line">  </span><br><span class="line">if ( __name__ == &quot;__main__&quot;):</span><br><span class="line">   </span><br><span class="line">   # 创建一个 XMLReader</span><br><span class="line">   parser = xml.sax.make_parser()</span><br><span class="line">   # turn off namepsaces</span><br><span class="line">   parser.setFeature(xml.sax.handler.feature_namespaces, 0)</span><br><span class="line"> </span><br><span class="line">   # 重写 ContextHandler</span><br><span class="line">   Handler = MovieHandler()</span><br><span class="line">   parser.setContentHandler( Handler )</span><br><span class="line">   </span><br><span class="line">   parser.parse(&quot;movies.xml&quot;)</span><br></pre></td></tr></table></figure></p>
<h2 id="DOM（文档对象模型）"><a href="#DOM（文档对象模型）" class="headerlink" title="DOM（文档对象模型）"></a>DOM（文档对象模型）</h2><p>将XML数据在内存中解析成一个树，通过对树的操作来操作XML。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">from xml.dom.minidom import parse</span><br><span class="line">import xml.dom.minidom</span><br><span class="line"> </span><br><span class="line"># 使用minidom解析器打开 XML 文档</span><br><span class="line">DOMTree = xml.dom.minidom.parse(&quot;movies.xml&quot;)</span><br><span class="line">collection = DOMTree.documentElement</span><br><span class="line">if collection.hasAttribute(&quot;shelf&quot;):</span><br><span class="line">   print &quot;Root element : %s&quot; % collection.getAttribute(&quot;shelf&quot;)</span><br><span class="line"> </span><br><span class="line"># 在集合中获取所有电影</span><br><span class="line">movies = collection.getElementsByTagName(&quot;movie&quot;)</span><br><span class="line"> </span><br><span class="line"># 打印每部电影的详细信息</span><br><span class="line">for movie in movies:</span><br><span class="line">   print &quot;*****Movie*****&quot;</span><br><span class="line">   if movie.hasAttribute(&quot;title&quot;):</span><br><span class="line">      print &quot;Title: %s&quot; % movie.getAttribute(&quot;title&quot;)</span><br><span class="line"> </span><br><span class="line">   type = movie.getElementsByTagName(&apos;type&apos;)[0]</span><br><span class="line">   print &quot;Type: %s&quot; % type.childNodes[0].data</span><br><span class="line">   format = movie.getElementsByTagName(&apos;format&apos;)[0]</span><br><span class="line">   print &quot;Format: %s&quot; % format.childNodes[0].data</span><br><span class="line">   rating = movie.getElementsByTagName(&apos;rating&apos;)[0]</span><br><span class="line">   print &quot;Rating: %s&quot; % rating.childNodes[0].data</span><br><span class="line">   description = movie.getElementsByTagName(&apos;description&apos;)[0]</span><br><span class="line">   print &quot;Description: %s&quot; % description.childNodes[0].data</span><br></pre></td></tr></table></figure></p>
<h2 id="ElementTree（元素树）"><a href="#ElementTree（元素树）" class="headerlink" title="ElementTree（元素树）"></a>ElementTree（元素树）</h2><p>ElementTree的就像一个轻量级的DOM，具有方便友好的API。代码可用性好，速度快，消耗内存少。</p>
<h1 id="Python-JSON"><a href="#Python-JSON" class="headerlink" title="Python JSON"></a>Python JSON</h1><p>使用 JSON 函数需要导入 json 库：import json。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">函数	描述</span><br><span class="line">json.dumps	将 Python 对象编码成 JSON 字符串</span><br><span class="line">json.loads	将已编码的 JSON 字符串解码为 Python 对象</span><br></pre></td></tr></table></figure></p>
<p>实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">data = [ &#123; &apos;a&apos; : 1, &apos;b&apos; : 2, &apos;c&apos; : 3, &apos;d&apos; : 4, &apos;e&apos; : 5 &#125; ]</span><br><span class="line"></span><br><span class="line">json = json.dumps(data)</span><br><span class="line">print json</span><br></pre></td></tr></table></figure></p>
<p>python 原始类型向 json 类型的转化对照表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python	JSON</span><br><span class="line">dict	object</span><br><span class="line">list, tuple	array</span><br><span class="line">str, unicode	string</span><br><span class="line">int, long, float	number</span><br><span class="line">True	true</span><br><span class="line">False	false</span><br><span class="line">None	null</span><br></pre></td></tr></table></figure></p>
<h2 id="json-loads"><a href="#json-loads" class="headerlink" title="json.loads"></a>json.loads</h2><p>json.loads 用于解码 JSON 数据。该函数返回 Python 字段的数据类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">jsonData = &apos;&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5&#125;&apos;;</span><br><span class="line"></span><br><span class="line">text = json.loads(jsonData)</span><br><span class="line">print text</span><br></pre></td></tr></table></figure>
<h2 id="JSON库-Demjson"><a href="#JSON库-Demjson" class="headerlink" title="JSON库 Demjson"></a>JSON库 Demjson</h2><h2 id="安装-demjson"><a href="#安装-demjson" class="headerlink" title="安装 demjson"></a>安装 demjson</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/dmeranda/demjson</span><br><span class="line">cd demjson</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<h2 id="encode"><a href="#encode" class="headerlink" title="encode"></a>encode</h2><p>Python encode() 函数用于将 Python 对象编码成 JSON 字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import demjson</span><br><span class="line"></span><br><span class="line">data = [ &#123; &apos;a&apos; : 1, &apos;b&apos; : 2, &apos;c&apos; : 3, &apos;d&apos; : 4, &apos;e&apos; : 5 &#125; ]</span><br><span class="line"></span><br><span class="line">json = demjson.encode(data)</span><br><span class="line">print json</span><br></pre></td></tr></table></figure></p>
<h2 id="decode"><a href="#decode" class="headerlink" title="decode"></a>decode</h2><p>Python 可以使用 demjson.decode() 函数解码 JSON 数据。该函数返回 Python 字段的数据类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import demjson</span><br><span class="line"></span><br><span class="line">json = &apos;&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5&#125;&apos;;</span><br><span class="line"></span><br><span class="line">text = demjson.decode(json)</span><br><span class="line">print  text</span><br></pre></td></tr></table></figure>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/开发/" rel="tag">#开发</a>
          
            <a href="/tags/PYTHON/" rel="tag">#PYTHON</a>
          
            <a href="/tags/公众号/" rel="tag">#公众号</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2999/04/13/资源宇宙--持续更新/" rel="prev">资源宇宙--持续更新</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/12/web侠客行（十八）--python开发基础教程/" rel="next">web侠客行（十八）--python开发基础教程</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div>
      
        <style type="text/css">

    .donate_bar {
        text-align: center;
        margin-top : 5%;
    }

    .donate_bar.hidden {
        display:none;
    }
/*
    .donate_bar a.btn_donate {
        display: inline-block;
        width: 82px;
        height: 82px;
        margin-left:auto;
        margin-right:auto;

        background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat;
        _background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat; 

        -webkit-transition: background 0s;
        -moz-transition: background 0s;
        -o-transition: background 0s;
        -ms-transition: background 0s;
        transition: background 0s;
    }
*/
    .donate_bar a.btn_donate:hover { 
        // background-position: 0px -82px;
        color: #87daff
    }

    .donate_bar .donate_txt {
        display: block;
        color: #9d9d9d;
        font: 14px/2 "Microsoft Yahei";
    }

    .bold { 
        font-weight: bold; 
    }

    .post-donate a {
        border-bottom: 0px;
    }

    #donate_guide table {
        border: none;
    }

    #donate_guide td {
        border-bottom: none;
        border-right: none;
        background: #333333;
        valign: top;
    }

</style>



    

    <div class="post-donate">
        <div id="donate_board" class="donate_bar center">
              <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏">赏</a>
              <span id="donate_txt" class="donate_txt">
                   
              </span>
            <br>
        </div>  
  
        <div id="donate_guide" class="donate_bar center hidden">
            <!--
            
                <a href="http://sylucky.club/alipay.jpg" title="支付宝打赏" class="fancybox" rel="article0" 
                    style="float:left;margin-left:25%;margin-right:10px;">
                    <img src="http://sylucky.club/alipay.jpg" title="" height="164px" width="164px">
                </a> 
              

            
                <a href="http://sylucky.club/wechat.jpg" title="微信打赏" class="fancybox" rel="article0"
                    style="margin-right:30%">
                    <img src="http://sylucky.club/wechat.jpg" title="" height="164px" width="164px">
                </a>
            
            -->
            <table>
                <tr>
                    <td>
                        
                            <a href="http://sylucky.club/alipay.jpg" title="支付宝打赏" class="fancybox" rel="article0" style="float:left;margin-left:25%;margin-right:10px;">
                                <img src="http://sylucky.club/alipay.jpg" title height="164px" width="164px">
                            </a> 
                         
                    </td>
                    <td>
                        
                            <a href="http://sylucky.club/wechat.jpg" title="微信打赏" class="fancybox" rel="article0" style="margin-right:30%">
                                <img src="http://sylucky.club/wechat.jpg" title height="164px" width="164px">
                            </a>
                        
                    </td>
                </tr>
            </table>

        </div>

        <script type="text/javascript">
            document.getElementById('btn_donate').onclick = function() {
                $('#donate_board').addClass('hidden');
                // $('#donate_guide').removeClass('hidden');
                $('#donate_guide').show(2000);
            }

        </script>
    </div>

    


      
    </div>

    <div class="post-spread">
      
        <div class="bdsharebuttonbox">
	<a href="#" class="bds_more" data-cmd="more"></a>
	<a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
	<a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a>
	<a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
</div>
<script>
    window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>

 </div>

        
          <div class="comments" id="comments">
            
            -->
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="剑神一笑" itemprop="image">
          <p class="site-author-name" itemprop="name">剑神一笑</p>
        </div>
        <p class="site-description motion-element" itemprop="description">剑神一笑天地变，不爱江山爱美人</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sylucky" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://me.csdn.net/sylucky" target="_blank">CSDN</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/sylucky2004" target="_blank">Weibo</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/sylucky.zhihu.io" target="_blank">ZhiHu</a>
              </span>
            
          
        </div>

        <div class="links-of-friendly motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
              <a href="http://blog.idhyt.com/about/" target="_blank">About</a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
            </a>
          </div>
        

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-模块"><span class="nav-number">1.</span> <span class="nav-text">Python 模块</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#模块的引入"><span class="nav-number">1.1.</span> <span class="nav-text">模块的引入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#from…import-语句"><span class="nav-number">1.2.</span> <span class="nav-text">from…import 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#from…import-语句-1"><span class="nav-number">1.3.</span> <span class="nav-text">from…import* 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PYTHONPATH-变量"><span class="nav-number">1.4.</span> <span class="nav-text">PYTHONPATH 变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dir-函数"><span class="nav-number">1.5.</span> <span class="nav-text">dir()函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#globals-和-locals-函数"><span class="nav-number">1.6.</span> <span class="nav-text">globals() 和 locals() 函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reload-函数"><span class="nav-number">1.7.</span> <span class="nav-text">reload() 函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-文件I-O"><span class="nav-number">2.</span> <span class="nav-text">Python 文件I/O</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#打印到屏幕"><span class="nav-number">2.1.</span> <span class="nav-text">打印到屏幕</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#读取键盘输入"><span class="nav-number">2.2.</span> <span class="nav-text">读取键盘输入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#raw-input函数"><span class="nav-number">2.2.1.</span> <span class="nav-text">raw_input函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#input函数"><span class="nav-number">2.2.2.</span> <span class="nav-text">input函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File对象"><span class="nav-number">2.3.</span> <span class="nav-text">File对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#open-函数"><span class="nav-number">2.3.1.</span> <span class="nav-text">open 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#close-方法"><span class="nav-number">2.3.2.</span> <span class="nav-text">close()方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-方法"><span class="nav-number">2.3.3.</span> <span class="nav-text">write()方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-方法"><span class="nav-number">2.3.4.</span> <span class="nav-text">read()方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件定位"><span class="nav-number">2.4.</span> <span class="nav-text">文件定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rename-方法"><span class="nav-number">2.5.</span> <span class="nav-text">rename()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#remove-方法"><span class="nav-number">2.6.</span> <span class="nav-text">remove()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mkdir-方法"><span class="nav-number">2.7.</span> <span class="nav-text">mkdir()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#child-方法"><span class="nav-number">2.8.</span> <span class="nav-text">child()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getcwd-方法"><span class="nav-number">2.9.</span> <span class="nav-text">getcwd()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rmdir-方法"><span class="nav-number">2.10.</span> <span class="nav-text">rmdir()方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#异常处理"><span class="nav-number">3.</span> <span class="nav-text">异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#python标准异常"><span class="nav-number">3.1.</span> <span class="nav-text">python标准异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#try-finally-语句"><span class="nav-number">3.2.</span> <span class="nav-text">try-finally 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#触发异常"><span class="nav-number">3.3.</span> <span class="nav-text">触发异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户自定义异常"><span class="nav-number">3.4.</span> <span class="nav-text">用户自定义异常</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-面向对象"><span class="nav-number">4.</span> <span class="nav-text">Python 面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建类"><span class="nav-number">4.1.</span> <span class="nav-text">创建类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建实例对象"><span class="nav-number">4.2.</span> <span class="nav-text">创建实例对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python内置类属性"><span class="nav-number">4.3.</span> <span class="nav-text">Python内置类属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#析构函数"><span class="nav-number">4.4.</span> <span class="nav-text">析构函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类的继承"><span class="nav-number">4.5.</span> <span class="nav-text">类的继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类属性与方法"><span class="nav-number">4.6.</span> <span class="nav-text">类属性与方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类的私有属性"><span class="nav-number">4.6.1.</span> <span class="nav-text">类的私有属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的方法"><span class="nav-number">4.6.2.</span> <span class="nav-text">类的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的私有方法"><span class="nav-number">4.6.3.</span> <span class="nav-text">类的私有方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#单下划线、双下划线、头尾双下划线说明："><span class="nav-number">4.7.</span> <span class="nav-text">单下划线、双下划线、头尾双下划线说明：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-正则表达式"><span class="nav-number">5.</span> <span class="nav-text">Python 正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#re-match函数"><span class="nav-number">5.1.</span> <span class="nav-text">re.match函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re-search方法"><span class="nav-number">5.2.</span> <span class="nav-text">re.search方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re-match与re-search的区别"><span class="nav-number">5.3.</span> <span class="nav-text">re.match与re.search的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#检索和替换"><span class="nav-number">5.4.</span> <span class="nav-text">检索和替换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#findall"><span class="nav-number">5.5.</span> <span class="nav-text">findall</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re-finditer"><span class="nav-number">5.6.</span> <span class="nav-text">re.finditer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re-split"><span class="nav-number">5.7.</span> <span class="nav-text">re.split</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式修饰符-可选标志"><span class="nav-number">5.8.</span> <span class="nav-text">正则表达式修饰符 - 可选标志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式模式"><span class="nav-number">5.9.</span> <span class="nav-text">正则表达式模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式实例"><span class="nav-number">5.10.</span> <span class="nav-text">正则表达式实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-CGI编程"><span class="nav-number">6.</span> <span class="nav-text">Python CGI编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Web-服务器支持及配置"><span class="nav-number">6.1.</span> <span class="nav-text">Web 服务器支持及配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一个CGI程序"><span class="nav-number">6.2.</span> <span class="nav-text">第一个CGI程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP头部"><span class="nav-number">6.3.</span> <span class="nav-text">HTTP头部</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CGI环境变量"><span class="nav-number">6.4.</span> <span class="nav-text">CGI环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用GET方法传输数据"><span class="nav-number">6.5.</span> <span class="nav-text">使用GET方法传输数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用POST方法传递数据"><span class="nav-number">6.6.</span> <span class="nav-text">使用POST方法传递数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过CGI程序传递checkbox数据"><span class="nav-number">6.7.</span> <span class="nav-text">通过CGI程序传递checkbox数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过CGI程序传递下拉数据。"><span class="nav-number">6.8.</span> <span class="nav-text">通过CGI程序传递下拉数据。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CGI中使用Cookie"><span class="nav-number">6.9.</span> <span class="nav-text">CGI中使用Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#检索Cookie信息"><span class="nav-number">6.10.</span> <span class="nav-text">检索Cookie信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件上传实例"><span class="nav-number">6.11.</span> <span class="nav-text">文件上传实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件下载对话框"><span class="nav-number">6.12.</span> <span class="nav-text">文件下载对话框</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-操作-MySQL-数据库"><span class="nav-number">7.</span> <span class="nav-text">Python 操作 MySQL 数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装mysql-connector"><span class="nav-number">7.1.</span> <span class="nav-text">安装mysql-connector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#验证安装"><span class="nav-number">7.2.</span> <span class="nav-text">验证安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接mysql"><span class="nav-number">7.3.</span> <span class="nav-text">连接mysql</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建表"><span class="nav-number">7.4.</span> <span class="nav-text">建表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插入"><span class="nav-number">7.5.</span> <span class="nav-text">插入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查询"><span class="nav-number">7.6.</span> <span class="nav-text">查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用实例"><span class="nav-number">7.7.</span> <span class="nav-text">应用实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-网络编程"><span class="nav-number">8.</span> <span class="nav-text">Python 网络编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#服务端"><span class="nav-number">8.1.</span> <span class="nav-text">服务端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#客户端"><span class="nav-number">8.2.</span> <span class="nav-text">客户端</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-SMTP发送邮件"><span class="nav-number">9.</span> <span class="nav-text">Python SMTP发送邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#发一封邮件"><span class="nav-number">9.1.</span> <span class="nav-text">发一封邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#给多人发邮件"><span class="nav-number">9.2.</span> <span class="nav-text">给多人发邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Python的发送HTML格式的邮件"><span class="nav-number">9.3.</span> <span class="nav-text">使用Python的发送HTML格式的邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python发送带附件的邮件"><span class="nav-number">9.4.</span> <span class="nav-text">Python发送带附件的邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在HTML文本中添加图片"><span class="nav-number">9.5.</span> <span class="nav-text">在HTML文本中添加图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QQ-SMTP"><span class="nav-number">9.6.</span> <span class="nav-text">QQ SMTP</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-多线程"><span class="nav-number">10.</span> <span class="nav-text">Python 多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Threading模块创建线程"><span class="nav-number">10.1.</span> <span class="nav-text">使用Threading模块创建线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#线程同步"><span class="nav-number">10.2.</span> <span class="nav-text">线程同步</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#线程优先级队列（-Queue）"><span class="nav-number">10.3.</span> <span class="nav-text">线程优先级队列（ Queue）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-XML解析"><span class="nav-number">11.</span> <span class="nav-text">Python XML解析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SAX（XML的简单API）"><span class="nav-number">11.1.</span> <span class="nav-text">SAX（XML的简单API）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM（文档对象模型）"><span class="nav-number">11.2.</span> <span class="nav-text">DOM（文档对象模型）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ElementTree（元素树）"><span class="nav-number">11.3.</span> <span class="nav-text">ElementTree（元素树）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-JSON"><span class="nav-number">12.</span> <span class="nav-text">Python JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#json-loads"><span class="nav-number">12.1.</span> <span class="nav-text">json.loads</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSON库-Demjson"><span class="nav-number">12.2.</span> <span class="nav-text">JSON库 Demjson</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-demjson"><span class="nav-number">12.3.</span> <span class="nav-text">安装 demjson</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#encode"><span class="nav-number">12.4.</span> <span class="nav-text">encode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#decode"><span class="nav-number">12.5.</span> <span class="nav-text">decode</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </div></main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright">
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2019
  </span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">剑神一笑
  </span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme by <a class="theme-link" href="https://idhyt.github.io">idhyt</a>.<a class="theme-link" href="https://github.com/idhyt/hexo-theme-next/tree/magiclamp">Mala</a>
</div>

<!-- busuanzi -->



 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
